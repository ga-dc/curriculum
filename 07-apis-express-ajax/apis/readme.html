<!DOCTYPE HTML>
<html lang="en" >
    
    <head>
        
        <meta charset="UTF-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <title>Building APIs in Rails | Welcome to GA&#39;s WDI-DC</title>
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="">
        <meta name="generator" content="GitBook 2.6.6">
        
        
        <meta name="HandheldFriendly" content="true"/>
        <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
        <meta name="apple-mobile-web-app-capable" content="yes">
        <meta name="apple-mobile-web-app-status-bar-style" content="black">
        <link rel="apple-touch-icon-precomposed" sizes="152x152" href="../../gitbook/images/apple-touch-icon-precomposed-152.png">
        <link rel="shortcut icon" href="../../gitbook/images/favicon.ico" type="image/x-icon">
        
    <link rel="stylesheet" href="../../gitbook/style.css">
    
        
        <link rel="stylesheet" href="../../gitbook/plugins/gitbook-plugin-highlight/website.css">
        
    
        
        <link rel="stylesheet" href="../../gitbook/plugins/gitbook-plugin-search/search.css">
        
    
        
        <link rel="stylesheet" href="../../gitbook/plugins/gitbook-plugin-fontsettings/website.css">
        
    
    

        
    
    
    <link rel="next" href="../../07-apis-express-ajax/ajax/readme.html" />
    
    
    <link rel="prev" href="../../07-apis-express-ajax/readme.html" />
    

        
    </head>
    <body>
        
        
    <div class="book"
        data-level="5.1"
        data-chapter-title="Building APIs in Rails"
        data-filepath="07-apis-express-ajax/apis/readme.md"
        data-basepath="../.."
        data-revision="Mon Jan 04 2016 14:05:06 GMT+0000 (UTC)"
        data-innerlanguage="">
    

<div class="book-summary">
    <nav role="navigation">
        <ul class="summary">
            
            
            
            

            

            
    
        <li class="chapter " data-level="0" data-path="index.html">
            
                
                    <a href="../../index.html">
                
                        <i class="fa fa-check"></i>
                        
                        An Introduction
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="1" data-path="01-front-end-fundamentals/readme.html">
            
                
                    <a href="../../01-front-end-fundamentals/readme.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>1.</b>
                        
                        Front End Fundamentals
                    </a>
            
            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.1" data-path="01-front-end-fundamentals/command-line/readme.html">
            
                
                    <a href="../../01-front-end-fundamentals/command-line/readme.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>1.1.</b>
                        
                        Command Line Interface
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="1.2" data-path="01-front-end-fundamentals/git/readme.html">
            
                
                    <a href="../../01-front-end-fundamentals/git/readme.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>1.2.</b>
                        
                        Git
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="1.3" data-path="01-front-end-fundamentals/intro-to-web-and-html/readme.html">
            
                
                    <a href="../../01-front-end-fundamentals/intro-to-web-and-html/readme.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>1.3.</b>
                        
                        Intro to Web and HTML
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="1.4" data-path="01-front-end-fundamentals/css/readme.html">
            
                
                    <a href="../../01-front-end-fundamentals/css/readme.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>1.4.</b>
                        
                        CSS
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="1.5" data-path="01-front-end-fundamentals/javascript-data-types/readme.html">
            
            <span><b>1.5.</b> JavaScript Data Types</span>
            
            
        </li>
    
        <li class="chapter " data-level="1.6" data-path="01-front-end-fundamentals/javascript-loops-conditionals/readme.html">
            
            <span><b>1.6.</b> JavaScript Loops and Conditionals</span>
            
            
        </li>
    
        <li class="chapter " data-level="1.7" data-path="01-front-end-fundamentals/javascript-objects-functions/readme.html">
            
                
                    <a href="../../01-front-end-fundamentals/javascript-objects-functions/readme.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>1.7.</b>
                        
                        JavaScript Objects and Functions
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="1.8" data-path="01-front-end-fundamentals/javascript-DOM/readme.html">
            
                
                    <a href="../../01-front-end-fundamentals/javascript-DOM/readme.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>1.8.</b>
                        
                        JavaScript DOM
                    </a>
            
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="2" data-path="02-intermediate-front-end/readme.html">
            
                
                    <a href="../../02-intermediate-front-end/readme.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>2.</b>
                        
                        Intermediate Front End
                    </a>
            
            
            <ul class="articles">
                
    
        <li class="chapter " data-level="2.1" data-path="02-intermediate-front-end/scope-context-closures/readme.html">
            
                
                    <a href="../../02-intermediate-front-end/scope-context-closures/readme.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>2.1.</b>
                        
                        Scope, Context, and Closures
                    </a>
            
            
            <ul class="articles">
                
    
        <li class="chapter " data-level="2.1.1" data-path="02-intermediate-front-end/scope-context-closures/scope.html">
            
                
                    <a href="../../02-intermediate-front-end/scope-context-closures/scope.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>2.1.1.</b>
                        
                        Scope
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="2.1.2" data-path="02-intermediate-front-end/scope-context-closures/context.html">
            
                
                    <a href="../../02-intermediate-front-end/scope-context-closures/context.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>2.1.2.</b>
                        
                        Context
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="2.1.3" data-path="02-intermediate-front-end/scope-context-closures/closures.html">
            
                
                    <a href="../../02-intermediate-front-end/scope-context-closures/closures.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>2.1.3.</b>
                        
                        Closures
                    </a>
            
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="2.2" data-path="02-intermediate-front-end/events-and-callbacks/readme.html">
            
                
                    <a href="../../02-intermediate-front-end/events-and-callbacks/readme.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>2.2.</b>
                        
                        Events and Callbacks
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="2.3" data-path="02-intermediate-front-end/git_branching/readme.html">
            
                
                    <a href="../../02-intermediate-front-end/git_branching/readme.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>2.3.</b>
                        
                        Git Branching
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="2.4" data-path="02-intermediate-front-end/jquery/jquery-intro-selectors.html">
            
                
                    <a href="../../02-intermediate-front-end/jquery/jquery-intro-selectors.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>2.4.</b>
                        
                        jQuery
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="2.5" data-path="02-intermediate-front-end/jquery/jquery-two.html">
            
                
                    <a href="../../02-intermediate-front-end/jquery/jquery-two.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>2.5.</b>
                        
                        jQuery 2
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="2.6" data-path="02-intermediate-front-end/workflows/lesson_plan.html">
            
            <span><b>2.6.</b> Workflows</span>
            
            
        </li>
    
        <li class="chapter " data-level="2.7" data-path="02-intermediate-front-end/css2/readme.html">
            
                
                    <a href="../../02-intermediate-front-end/css2/readme.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>2.7.</b>
                        
                        CSS 2 (Layout &amp; Fonts)
                    </a>
            
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="3" data-path="04-ruby-mvc-sinatra/readme.html">
            
                
                    <a href="../../04-ruby-mvc-sinatra/readme.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>3.</b>
                        
                        Ruby + MVC with Sinatra
                    </a>
            
            
            <ul class="articles">
                
    
        <li class="chapter " data-level="3.1" data-path="04-ruby-mvc-sinatra/ruby-basics/readme.html">
            
                
                    <a href="../../04-ruby-mvc-sinatra/ruby-basics/readme.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>3.1.</b>
                        
                        Ruby Basics
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="3.2" data-path="04-ruby-mvc-sinatra/ruby-enumerables/readme.html">
            
                
                    <a href="../../04-ruby-mvc-sinatra/ruby-enumerables/readme.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>3.2.</b>
                        
                        Ruby Enumerables
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="3.3" data-path="04-ruby-mvc-sinatra/problem_modeling/readme.html">
            
            <span><b>3.3.</b> Problem Modeling</span>
            
            
        </li>
    
        <li class="chapter " data-level="3.4" data-path="04-ruby-mvc-sinatra/domain_modeling/readme.html">
            
                
                    <a href="../../04-ruby-mvc-sinatra/domain_modeling/readme.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>3.4.</b>
                        
                        Domain Modeling
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="3.5" data-path="04-ruby-mvc-sinatra/databases/readme.html">
            
                
                    <a href="../../04-ruby-mvc-sinatra/databases/readme.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>3.5.</b>
                        
                        Databases
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="3.6" data-path="04-ruby-mvc-sinatra/active-record-intro/readme.html">
            
                
                    <a href="../../04-ruby-mvc-sinatra/active-record-intro/readme.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>3.6.</b>
                        
                        Active Record
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="3.7" data-path="04-ruby-mvc-sinatra/sinatra-rest/readme.html">
            
                
                    <a href="../../04-ruby-mvc-sinatra/sinatra-rest/readme.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>3.7.</b>
                        
                        Sinatra &amp; REST
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="3.8" data-path="04-ruby-mvc-sinatra/sinatra-and-activerecord/readme.html">
            
                
                    <a href="../../04-ruby-mvc-sinatra/sinatra-and-activerecord/readme.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>3.8.</b>
                        
                        Sinatra &amp; Active Record
                    </a>
            
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="4" data-path="05-mvc-with-rails/readme.html">
            
                
                    <a href="../../05-mvc-with-rails/readme.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>4.</b>
                        
                        MVC with Rails
                    </a>
            
            
            <ul class="articles">
                
    
        <li class="chapter " data-level="4.1" data-path="05-mvc-with-rails/rspec/readme.html">
            
                
                    <a href="../../05-mvc-with-rails/rspec/readme.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>4.1.</b>
                        
                        Unit Testing with RSpec
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="4.2" data-path="05-mvc-with-rails/MVC-intro-to-rails/readme.html">
            
                
                    <a href="../../05-mvc-with-rails/MVC-intro-to-rails/readme.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>4.2.</b>
                        
                        MVC Intro to Rails
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="4.3" data-path="05-mvc-with-rails/rails-models-and-migrations/readme.html">
            
                
                    <a href="../../05-mvc-with-rails/rails-models-and-migrations/readme.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>4.3.</b>
                        
                        Models and Migrations
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="4.4" data-path="05-mvc-with-rails/rails-views-and-controllers/readme.html">
            
                
                    <a href="../../05-mvc-with-rails/rails-views-and-controllers/readme.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>4.4.</b>
                        
                        Views and Controllers
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="4.5" data-path="05-mvc-with-rails/rails-routes-and-resources/readme.html">
            
                
                    <a href="../../05-mvc-with-rails/rails-routes-and-resources/readme.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>4.5.</b>
                        
                        Routes and Resources
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="4.6" data-path="05-mvc-with-rails/rails-helpers/readme.html">
            
                
                    <a href="../../05-mvc-with-rails/rails-helpers/readme.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>4.6.</b>
                        
                        Helpers
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="4.7" data-path="05-mvc-with-rails/rails-error-handling/readme.html">
            
                
                    <a href="../../05-mvc-with-rails/rails-error-handling/readme.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>4.7.</b>
                        
                        Error Handling and Validations
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="4.8" data-path="05-mvc-with-rails/rails-sessions-and-auth/readme.html">
            
                
                    <a href="../../05-mvc-with-rails/rails-sessions-and-auth/readme.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>4.8.</b>
                        
                        Sessions and Auth
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="4.9" data-path="05-mvc-with-rails/rails-deployment/readme.html">
            
                
                    <a href="../../05-mvc-with-rails/rails-deployment/readme.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>4.9.</b>
                        
                        Deployment
                    </a>
            
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="5" data-path="07-apis-express-ajax/readme.html">
            
                
                    <a href="../../07-apis-express-ajax/readme.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>5.</b>
                        
                        APIs/Express/AJAX
                    </a>
            
            
            <ul class="articles">
                
    
        <li class="chapter active" data-level="5.1" data-path="07-apis-express-ajax/apis/readme.html">
            
                
                    <a href="../../07-apis-express-ajax/apis/readme.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>5.1.</b>
                        
                        Building APIs in Rails
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="5.2" data-path="07-apis-express-ajax/ajax/readme.html">
            
                
                    <a href="../../07-apis-express-ajax/ajax/readme.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>5.2.</b>
                        
                        AJAX
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="5.3" data-path="07-apis-express-ajax/prototypes_and_constructors/readme.html">
            
                
                    <a href="../../07-apis-express-ajax/prototypes_and_constructors/readme.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>5.3.</b>
                        
                        Prototypes and Constructors
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="5.4" data-path="07-apis-express-ajax/express_intro/readme.html">
            
                
                    <a href="../../07-apis-express-ajax/express_intro/readme.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>5.4.</b>
                        
                        Intro to Express
                    </a>
            
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="6" data-path="08-single-page-web-apps/readme.html">
            
                
                    <a href="../../08-single-page-web-apps/readme.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>6.</b>
                        
                        Single Page Web Apps
                    </a>
            
            
            <ul class="articles">
                
    
        <li class="chapter " data-level="6.1" data-path="08-single-page-web-apps/express_2/readme.html">
            
                
                    <a href="../../08-single-page-web-apps/express_2/readme.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>6.1.</b>
                        
                        Express Routing / APIs
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="6.2" data-path="08-single-page-web-apps/mongo_mongoose/readme.html">
            
                
                    <a href="../../08-single-page-web-apps/mongo_mongoose/readme.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>6.2.</b>
                        
                        Mongo and Mongoose
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="6.3" data-path="08-single-page-web-apps/node-express-user-authentication/readme.html">
            
                
                    <a href="../../08-single-page-web-apps/node-express-user-authentication/readme.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>6.3.</b>
                        
                        Local Authentication using Passport
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="6.4" data-path="08-single-page-web-apps/oauth-via-3rd-party-apps/readme.html">
            
            <span><b>6.4.</b> OAuth using Passport</span>
            
            
        </li>
    
        <li class="chapter " data-level="6.5" data-path="08-single-page-web-apps/oojs1_read/readme.html">
            
            <span><b>6.5.</b> Object-Oriented FE JS: R / CRUD</span>
            
            
        </li>
    
        <li class="chapter " data-level="6.6" data-path="08-single-page-web-apps/oojs2_create_update_destroy/readme.html">
            
            <span><b>6.6.</b> Object-Oriented FE JS: CUD / CRUD</span>
            
            
        </li>
    
        <li class="chapter " data-level="6.7" data-path="08-single-page-web-apps/git-teams/readme.html">
            
                
                    <a href="../../08-single-page-web-apps/git-teams/readme.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>6.7.</b>
                        
                        Git Team Workflows
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="6.8" data-path="08-single-page-web-apps/responsive-web-design/readme.html">
            
                
                    <a href="../../08-single-page-web-apps/responsive-web-design/readme.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>6.8.</b>
                        
                        Responsive Web Design
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="6.9" data-path="08-single-page-web-apps/tdd/readme.html">
            
                
                    <a href="../../08-single-page-web-apps/tdd/readme.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>6.9.</b>
                        
                        TDD JS using Jasmine
                    </a>
            
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="7" data-path="10-angular/readme.html">
            
                
                    <a href="../../10-angular/readme.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>7.</b>
                        
                        MVW with Angular
                    </a>
            
            
            <ul class="articles">
                
    
        <li class="chapter " data-level="7.1" data-path="10-angular/angular_intro_controllers_directives/readme.html">
            
            <span><b>7.1.</b> Angular Intro: Controllers &amp; Directives</span>
            
            
        </li>
    
        <li class="chapter " data-level="7.2" data-path="10-angular/services_templates_and_routing/readme.html">
            
            <span><b>7.2.</b> Services, Templates, and Routing</span>
            
            
        </li>
    
        <li class="chapter " data-level="7.3" data-path="10-angular/custom_directives/readme.html">
            
            <span><b>7.3.</b> Custom Directives</span>
            
            
        </li>
    
        <li class="chapter " data-level="7.4" data-path="10-angular/firebase_in_angular/readme.html">
            
            <span><b>7.4.</b> AngularFire: Firebase &amp; Angular</span>
            
            
        </li>
    
        <li class="chapter " data-level="7.5" data-path="10-angular/angular-vs-rails.html">
            
                
                    <a href="../../10-angular/angular-vs-rails.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>7.5.</b>
                        
                        Angular vs. Rails
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="7.6" data-path="11-multi-track/readme.html">
            
                
                    <a href="../../11-multi-track/readme.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>7.6.</b>
                        
                        Back and Front of Front End
                    </a>
            
            
            <ul class="articles">
                
    
        <li class="chapter " data-level="7.6.1" >
            
            <span><b>7.6.1.</b> BackBone</span>
            
            
            <ul class="articles">
                
    
        <li class="chapter " data-level="7.6.1.1" data-path="11-multi-track/bb_models_collections/readme.html">
            
                
                    <a href="../../11-multi-track/bb_models_collections/readme.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>7.6.1.1.</b>
                        
                        Models and Collections
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="7.6.1.2" data-path="11-multi-track/bb_views_part1/readme.html">
            
                
                    <a href="../../11-multi-track/bb_views_part1/readme.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>7.6.1.2.</b>
                        
                        Views (part 1)
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="7.6.1.3" data-path="11-multi-track/bb_views_part2/readme.html">
            
                
                    <a href="../../11-multi-track/bb_views_part2/readme.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>7.6.1.3.</b>
                        
                        Views (part 2)
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="7.6.1.4" data-path="11-multi-track/bb_routers/readme.html">
            
                
                    <a href="../../11-multi-track/bb_routers/readme.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>7.6.1.4.</b>
                        
                        Routers
                    </a>
            
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="7.6.2" >
            
            <span><b>7.6.2.</b> Front End</span>
            
            
            <ul class="articles">
                
    
        <li class="chapter " data-level="7.6.2.1" data-path="11-multi-track/bootstrap/readme.html">
            
                
                    <a href="../../11-multi-track/bootstrap/readme.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>7.6.2.1.</b>
                        
                        Bootstrap
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="7.6.2.2" data-path="11-multi-track/flexbox/readme.html">
            
                
                    <a href="../../11-multi-track/flexbox/readme.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>7.6.2.2.</b>
                        
                        Flex Box
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="7.6.2.3" data-path="11-multi-track/foundation/readme.html">
            
                
                    <a href="../../11-multi-track/foundation/readme.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>7.6.2.3.</b>
                        
                        Foundation
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="7.6.2.4" data-path="11-multi-track/intro-to-php/readme.html">
            
                
                    <a href="../../11-multi-track/intro-to-php/readme.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>7.6.2.4.</b>
                        
                        Intro to PHP
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="7.6.2.5" data-path="11-multi-track/jquery-plugins/readme.html">
            
                
                    <a href="../../11-multi-track/jquery-plugins/readme.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>7.6.2.5.</b>
                        
                        jQuery Plugins
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="7.6.2.6" data-path="11-multi-track/mapping/readme.html">
            
                
                    <a href="../../11-multi-track/mapping/readme.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>7.6.2.6.</b>
                        
                        Mapping
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="7.6.2.7" data-path="11-multi-track/pseudo-selectors/readme.html">
            
                
                    <a href="../../11-multi-track/pseudo-selectors/readme.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>7.6.2.7.</b>
                        
                        Pseudo Selectors
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="7.6.2.8" data-path="11-multi-track/sass1-basic-reuse/readme.html">
            
                
                    <a href="../../11-multi-track/sass1-basic-reuse/readme.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>7.6.2.8.</b>
                        
                        Sass 1: Basic Reuse
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="7.6.2.9" data-path="11-multi-track/sass2-control-directives/readme.html">
            
                
                    <a href="../../11-multi-track/sass2-control-directives/readme.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>7.6.2.9.</b>
                        
                        Sass 2: Control Directives
                    </a>
            
            
        </li>
    

            </ul>
            
        </li>
    

            </ul>
            
        </li>
    

            </ul>
            
        </li>
    


            
            <li class="divider"></li>
            <li>
                <a href="https://www.gitbook.com" target="blank" class="gitbook-link">
                    Published with GitBook
                </a>
            </li>
            
        </ul>
    </nav>
</div>

    <div class="book-body">
        <div class="body-inner">
            <div class="book-header" role="navigation">
    <!-- Actions Left -->
    

    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href="../../" >Welcome to GA&#39;s WDI-DC</a>
    </h1>
</div>

            <div class="page-wrapper" tabindex="-1" role="main">
                <div class="page-inner">
                
                
                    <section class="normal" id="section-">
                    
                        <h1 id="apis">APIs</h1>
<h2 id="learning-objectives">Learning Objectives</h2>
<ul>
<li>Describe what an API is, and why we might use one.</li>
<li>Explain the common role of JSON on the web.</li>
<li>Describe the purpose and syntax of <code>respond_to</code></li>
<li>Make a Rails app that provides a JSON API.</li>
<li>Use an external API (via HTTParty) to gather data and utilize it in a Rails application</li>
</ul>
<h2 id="what-is-an-api-30-minutes--030">What is an API? (30 minutes / 0:30)</h2>
<p><strong>Basically, an API is a service that provides raw data for public use.</strong></p>
<p>API stands for &quot;Application Program Interface&quot;, and technically applies to all of software design. However, since the explosion of information technology, the term now commonly refers to web URLs that can be accessed for raw data.</p>
<p>APIs publish data for public use. As third-party software developers, we can access an organization&apos;s API and use their data within our own applications.</p>
<p><strong>Check out these stock quotes...</strong></p>
<ul>
<li><a href="http://dev.markitondemand.com/Api/Quote/json?symbol=AAPL" target="_blank">http://dev.markitondemand.com/Api/Quote/json?symbol=AAPL</a></li>
<li><a href="http://dev.markitondemand.com/Api/Quote/json?symbol=GOOGL" target="_blank">http://dev.markitondemand.com/Api/Quote/json?symbol=GOOGL</a></li>
</ul>
<h2 id="api-exploration">API Exploration</h2>
<p>Form pairs and explore the API links in the below table. Record any observations that come to mind. In particular, think about what you see in the URL and the API response itself.</p>
<table>
<thead>
<tr>
<th>API</th>
<th>Sample URL</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong><a href="http://itsthisforthat.com/" target="_blank">This for That</a></strong></td>
<td><a href="http://itsthisforthat.com/api.php?json" target="_blank">http://itsthisforthat.com/api.php?json</a></td>
</tr>
<tr>
<td><strong><a href="https://www.apple.com/itunes/affiliates/resources/documentation/itunes-store-web-service-search-api.html" target="_blank">iTunes</a></strong></td>
<td><a href="http://itunes.apple.com/search?term=adele" target="_blank">http://itunes.apple.com/search?term=adele</a></td>
</tr>
<tr>
<td><strong><a href="https://github.com/Giphy/GiphyAPI" target="_blank">Giphy</a></strong></td>
<td><a href="http://api.giphy.com/v1/gifs/search?q=funny+cat&amp;api_key=dc6zaTOxFJmzC" target="_blank">http://api.giphy.com/v1/gifs/search?q=funny+cat&amp;api_key=dc6zaTOxFJmzC</a></td>
</tr>
<tr>
<td><strong><a href="http://www.omdbapi.com/" target="_blank">OMDB API</a></strong></td>
<td><a href="http://www.omdbapi.com/?t=Game%20of%20Thrones&amp;Season=1" target="_blank">http://www.omdbapi.com/?t=Game%20of%20Thrones&amp;Season=1</a></td>
</tr>
<tr>
<td><strong><a href="http://swapi.co/" target="_blank">StarWars</a></strong></td>
<td><a href="http://swapi.co/api/people/3" target="_blank">http://swapi.co/api/people/3</a></td>
</tr>
<tr>
<td><strong><a href="http://dev.markitondemand.com/MODApis/" target="_blank">Stocks</a></strong></td>
<td><a href="http://dev.markitondemand.com/Api/Quote/json?symbol=AAPL" target="_blank">http://dev.markitondemand.com/Api/Quote/json?symbol=AAPL</a></td>
</tr>
</tbody>
</table>
<h3 id="why-just-data">Why Just Data?</h3>
<p>Sometimes thats&apos;s all we need. All this information, from all these browsers and all these servers, has to travel through the network. That&apos;s almost certainly the slowest part of the request cycle. We want to minimize the bits. There are times when we just need the data. For those times, we want a concise format.   </p>
<h2 id="what-is-serialized-data">What is serialized data?</h2>
<p>All data sent via HTTP are strings. Unfortunately, what we really want to pass between web applications is <em>structured data</em>, as in: native arrays and hashes. Thus, native data structures can be <em>serialized</em> into a string representation of the data. This string can be transmitted, and then parsed back into data by another web agent.  </p>
<p>There are <strong>two</strong> major serialized data formats:  </p>
<ul>
<li><strong>JSON</strong> stands for &quot;JavaScript Object Notation&quot;, and has become a universal standard for serializing native data structures for transmission. It is light-weight, easy to read, and quick to parse.</li>
</ul>
<pre><code class="lang-json">{
  <span class="hljs-string">&quot;users&quot;</span>: [
    {<span class="hljs-string">&quot;name&quot;</span>: <span class="hljs-string">&quot;Bob&quot;</span>, <span class="hljs-string">&quot;id&quot;</span>: <span class="hljs-number">23</span>},
    {<span class="hljs-string">&quot;name&quot;</span>: <span class="hljs-string">&quot;Tim&quot;</span>, <span class="hljs-string">&quot;id&quot;</span>: <span class="hljs-number">72</span>}
  ]
}
</code></pre>
<blockquote>
<p>Remember, JSON is a serialized format. While it may look like an object, it needs to be parsed so we can interact with it as a true Javascript object.</p>
</blockquote>
<ul>
<li><strong>XML</strong> stands for &quot;eXtensible Markup Language&quot;, and is the granddaddy of serialized data formats (itself based on HTML). XML is fat, ugly, and cumbersome to parse. However, it remains a major format due to its legacy usage across the web. You&apos;ll probably always favor using a JSON API, if available.</li>
</ul>
<pre><code>&lt;users&gt;
  &lt;user id=&quot;23&quot;&gt;
    &lt;name&gt;&lt;![CDATA[Bob]]&gt;&lt;/name&gt;
  &lt;/user&gt;
  &lt;user id=&quot;72&quot;&gt;
    &lt;name&gt;&lt;![CDATA[Tim]]&gt;&lt;/name&gt;
  &lt;/user&gt;
&lt;/users&gt;
</code></pre><p><strong>Many APIs publish data in multiple formats, for example...</strong></p>
<ul>
<li><a href="http://dev.markitondemand.com/Api/Quote/json?symbol=AAPL" target="_blank">http://dev.markitondemand.com/Api/Quote/json?symbol=AAPL</a></li>
<li><a href="http://dev.markitondemand.com/Api/Quote/xml?symbol=AAPL" target="_blank">http://dev.markitondemand.com/Api/Quote/xml?symbol=AAPL</a></li>
</ul>
<h2 id="where-do-we-find-apis">Where Do We Find APIs?</h2>
<p>APIs are published everywhere. Chances are good that most major content sources you follow online publish their data in some type of serialized format. Heck, <a href="http://developer.marvel.com/documentation/getting_started" target="_blank">even Marvel publishes an API</a>. Look around for a &quot;Developers&quot; section on major websites, or ask the Google Answer-Bot.</p>
<p><strong>That sounds hard. Can&apos;t you just give me a freebie?</strong></p>
<p>Okay... try the <a href="http://www.programmableweb.com/apis/directory" target="_blank">Programmable Web API Directory</a> or the <a href="http://www.publicapis.com/" target="_blank">Public APIs Directory</a>.</p>
<h2 id="what-is-an-api-key">What Is An API Key?</h2>
<p>While the majority of APIs are free to use, many of them require an API &quot;key&quot; that identifies the developer requesting data access. This is done to regulate usage and prevent abuse. Some APIs also rate-limit developers, meaning they have caps on the free data allowed during a given time period.</p>
<p><strong>Try hitting the Giphy API...</strong></p>
<ul>
<li><p>No key: <a href="http://api.giphy.com/v1/gifs/search?q=funny+cat" target="_blank">http://api.giphy.com/v1/gifs/search?q=funny+cat</a></p>
</li>
<li><p>With key: <a href="http://api.giphy.com/v1/gifs/search?q=funny+cat&amp;api_key=dc6zaTOxFJmzC" target="_blank">http://api.giphy.com/v1/gifs/search?q=funny+cat&amp;api_key=dc6zaTOxFJmzC</a></p>
</li>
</ul>
<blockquote>
<p>It is very important that you not push your API keys to a public Github repo. <a href="https://github.com/laserlemon/figaro" target="_blank">Figaro</a> is a useful gem to utilize environment variables for hiding API keys.</p>
</blockquote>
<h2 id="good-starter-apis">Good Starter APIs</h2>
<p>There is an immense number of APIs out there from which you can pull data.</p>
<table>
<thead>
<tr>
<th>API</th>
<th>Sample URL</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong><a href="http://itsthisforthat.com/" target="_blank">This for That</a></strong></td>
<td><a href="http://itsthisforthat.com/api.php?json" target="_blank">http://itsthisforthat.com/api.php?json</a></td>
</tr>
<tr>
<td><strong><a href="https://www.apple.com/itunes/affiliates/resources/documentation/itunes-store-web-service-search-api.html" target="_blank">iTunes</a></strong></td>
<td><a href="http://itunes.apple.com/search?term=adele" target="_blank">http://itunes.apple.com/search?term=adele</a></td>
</tr>
<tr>
<td><strong><a href="https://github.com/Giphy/GiphyAPI" target="_blank">Giphy</a></strong></td>
<td><a href="http://api.giphy.com/v1/gifs/search?q=funny+cat&amp;api_key=dc6zaTOxFJmzC" target="_blank">http://api.giphy.com/v1/gifs/search?q=funny+cat&amp;api_key=dc6zaTOxFJmzC</a></td>
</tr>
<tr>
<td><strong><a href="http://www.omdbapi.com/" target="_blank">OMDB API</a></strong></td>
<td><a href="http://www.omdbapi.com/?t=Game%20of%20Thrones&amp;Season=1" target="_blank">http://www.omdbapi.com/?t=Game%20of%20Thrones&amp;Season=1</a></td>
</tr>
<tr>
<td><strong><a href="http://swapi.co/" target="_blank">StarWars</a></strong></td>
<td><a href="http://swapi.co/api/people/3" target="_blank">http://swapi.co/api/people/3</a></td>
</tr>
<tr>
<td><strong><a href="http://dev.markitondemand.com/MODApis/" target="_blank">Stocks</a></strong></td>
<td><a href="http://dev.markitondemand.com/Api/Quote/json?symbol=AAPL" target="_blank">http://dev.markitondemand.com/Api/Quote/json?symbol=AAPL</a></td>
</tr>
</tbody>
</table>
<blockquote>
<p>Note the variety in the URLs used to access these APIs. Do any of them look similar to what you&apos;ve made in class?</p>
</blockquote>
<h2 id="a-closer-look-at-an-api-request">A Closer Look at an API Request</h2>
<p>Let&apos;s make a basic HTTP request to an API. While we can technically just do this in the browser, we&apos;re going to use Postman - a Chrome plug-in for making HTTP requests - so we can look at it in more detail.<br>Steps  </p>
<ol>
<li><a href="https://www.getpostman.com/" target="_blank">Download Postman</a>.  </li>
<li>Type in the &quot;url&quot; of an API call.  </li>
<li>Ensure the &quot;method&quot; is &quot;GET&quot;.  </li>
<li>Press &quot;Send&quot;.  </li>
</ol>
<p>Here&apos;s an example of a successful <code>200 OK</code> API call...</p>
<p><img src="http://i.imgur.com/2TADr4J.png" alt="Postman screenshot success"></p>
<p>And here&apos;s an example of an unsuccessful <code>403 Forbidden</code> API call. Why did it fail?</p>
<p><img src="http://i.imgur.com/r3nIhGH.png" alt="Postman screenshot fail"></p>
<blockquote>
<p>We&apos;ll use Postman more when we test out our own API later in today&apos;s class.</p>
</blockquote>
<h2 id="rails-and-json">Rails and JSON</h2>
<h3 id="intro-10-minutes--040">Intro (10 minutes / 0:40)</h3>
<p>Today, we&apos;re going to use Rails to create our own API from which we can pull information. We will be using a familiar codebase, and modify it so that it can serve up data.  </p>
<p>Let&apos;s demonstrate using Tunr.</p>
<ul>
<li><strong><a href="https://github.com/ga-dc/tunr_rails_json" target="_blank">STARTER CODE</a></strong></li>
</ul>
<p>Earlier we used an HTTP request to retrieve information from a 3rd party API. Under the hood, that API received a GET request in the exact same way that the Rails application we have build in class thus far have received GET requests.</p>
<ul>
<li>All the requests that our Rails application can receive are listed when we run <code>rake routes</code> in the Terminal. We create RESTful routes and corresponding controller actions that respond to <code>GET</code> <code>POST</code> <code>PATCH</code> <code>PUT</code> and <code>DELETE</code> requests.</li>
</ul>
<pre><code class="lang-bash">Prefix            Verb   URI Pattern                                   Controller<span class="hljs-comment">#Action</span>
root              GET    /                                             artists<span class="hljs-comment">#index</span>
songs             GET    /songs(.:format)                              songs<span class="hljs-comment">#index</span>
artist_songs      GET    /artists/:artist_id/songs(.:format)           songs<span class="hljs-comment">#index</span>
                  POST   /artists/:artist_id/songs(.:format)           songs<span class="hljs-comment">#create</span>
new_artist_song   GET    /artists/:artist_id/songs/new(.:format)       songs<span class="hljs-comment">#new</span>
edit_artist_song  GET    /artists/:artist_id/songs/:id/edit(.:format)  songs<span class="hljs-comment">#edit</span>
artist_song       GET    /artists/:artist_id/songs/:id(.:format)       songs<span class="hljs-comment">#show</span>
                  PATCH  /artists/:artist_id/songs/:id(.:format)       songs<span class="hljs-comment">#update</span>
                  PUT    /artists/:artist_id/songs/:id(.:format)       songs<span class="hljs-comment">#update</span>
                  DELETE /artists/:artist_id/songs/:id(.:format)       songs<span class="hljs-comment">#destroy</span>
artist_genres     GET    /artists/:artist_id/genres(.:format)          genres<span class="hljs-comment">#index</span>
                  POST   /artists/:artist_id/genres(.:format)          genres<span class="hljs-comment">#create</span>
new_artist_genre  GET    /artists/:artist_id/genres/new(.:format)      genres<span class="hljs-comment">#new</span>
edit_artist_genre GET    /artists/:artist_id/genres/:id/edit(.:format) genres<span class="hljs-comment">#edit</span>
artist_genre      GET    /artists/:artist_id/genres/:id(.:format)      genres<span class="hljs-comment">#show</span>
                  PATCH  /artists/:artist_id/genres/:id(.:format)      genres<span class="hljs-comment">#update</span>
                  PUT    /artists/:artist_id/genres/:id(.:format)      genres<span class="hljs-comment">#update</span>
                  DELETE /artists/:artist_id/genres/:id(.:format)      genres<span class="hljs-comment">#destroy</span>
artists           GET    /artists(.:format)                            artists<span class="hljs-comment">#index</span>
                  POST   /artists(.:format)                            artists<span class="hljs-comment">#create</span>
new_artist        GET    /artists/new(.:format)                        artists<span class="hljs-comment">#new</span>
edit_artist       GET    /artists/:id/edit(.:format)                   artists<span class="hljs-comment">#edit</span>
artist            GET    /artists/:id(.:format)                        artists<span class="hljs-comment">#show</span>
                  PATCH  /artists/:id(.:format)                        artists<span class="hljs-comment">#update</span>
                  PUT    /artists/:id(.:format)                        artists<span class="hljs-comment">#update</span>
                  DELETE /artists/:id(.:format)                        artists<span class="hljs-comment">#destroy</span>
</code></pre>
<p>There&apos;s something under the <code>URI Pattern</code> column we haven&apos;t talked about much yet: <strong><code>.:format</code></strong></p>
<ul>
<li>Resources can be represented by many formats. Rails defaults to <code>:html</code>. But it can easily respond with <code>:json</code>, <code>:csv</code>, <code>:xml</code> and others.</li>
<li>Which format have we dealt with primarily so far?</li>
<li>Which format do we need our application to render in order to have a functional API?</li>
</ul>
<h3 id="i-do-tunr-artistsshow-10-minutes--050">I DO: Tunr artists#show (10 minutes / 0:50)</h3>
<p>Let&apos;s set up Tunr so that it returns JSON. <code>Artists#show</code> is a small, well-defined step. Let&apos;s start there.</p>
<p>What do we want to happen?</p>
<blockquote>
<p>If I ask for html, Rails renders html.
If I ask for JSON, Rails renders json.</p>
</blockquote>
<p>In particular, we want <code>/artists/4.json</code> to return this...</p>
<pre><code class="lang-json">{
  id: <span class="hljs-number">4</span>,
  name: <span class="hljs-string">&quot;Lykke Li&quot;</span>,
  photo_url: <span class="hljs-string">&quot;http://www.chartattack.com/wp-content/uploads/2012/07/lykke-li-newmain1-photo-by-daniel-jackson.jpg&quot;</span>,
  nationality: <span class="hljs-string">&quot;Sweden&quot;</span>,
  created_at: <span class="hljs-string">&quot;2015-08-11T02:44:24.173Z&quot;</span>,
  updated_at: <span class="hljs-string">&quot;2015-08-11T02:44:24.173Z&quot;</span>
}
</code></pre>
<p>Why <code>.json</code>? Check out <code>rake routes</code>...</p>
<pre><code class="lang-ruby"><span class="hljs-constant">Prefix</span>  <span class="hljs-constant">Verb</span>  <span class="hljs-constant">URI</span> <span class="hljs-constant">Pattern</span>             <span class="hljs-constant">Controller</span><span class="hljs-comment">#Action</span>
artist  <span class="hljs-constant">GET</span>   /artists/<span class="hljs-symbol">:id</span>(.<span class="hljs-symbol">:format</span>)  artists<span class="hljs-comment">#show</span>
</code></pre>
<p>See <code>(.:format)</code>? That means our routes support passing a format at the end of the path, using dot-notation (like a file extension).  </p>
<p>Requesting &quot;GET&quot; from Postman: <code>http://localhost:3000/artists/3.json</code>, we see a lot of something.  Not very helpful.  What is that?  </p>
<p>HTML? Let&apos;s test that url in our browser. What error do we see?</p>
<p><img src="http://i.imgur.com/4cWDzVU.png" alt="Missing template"></p>
<p>The important bits are:</p>
<ul>
<li>Missing template artists/show</li>
<li><code>:formats=&gt;[:json]</code></li>
</ul>
<p>Rails is expecting a JSON formatted response. Let&apos;s fix this by adding some lines to our show action in our controller.</p>
<h3 id="respondto">respond_to</h3>
<p>Rails provides an incredibly useful helper - <code>respond_to</code> - that we can use in our controller to render data in a given format depending on the incoming HTTP request.</p>
<p>Our current code...</p>
<pre><code class="lang-rb"><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">show</span></span>
  <span class="hljs-variable">@artist</span> = <span class="hljs-constant">Artist</span>.find(params[<span class="hljs-symbol">:id</span>])
<span class="hljs-keyword">end</span>
</code></pre>
<p>And after...</p>
<pre><code class="lang-rb"><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">show</span></span>
+    <span class="hljs-variable">@artist</span> = <span class="hljs-constant">Artist</span>.find( params[<span class="hljs-symbol">:id</span>] )
+
+    respond_to <span class="hljs-keyword">do</span> |format|
+      format.html { render <span class="hljs-symbol">:show</span> }
+      format.json { render <span class="hljs-symbol">json:</span> <span class="hljs-variable">@artist</span>, <span class="hljs-symbol">include:</span> <span class="hljs-symbol">:songs</span> }
+    <span class="hljs-keyword">end</span>
   <span class="hljs-keyword">end</span>
</code></pre>
<blockquote>
<p>If the request format is html, render the show view (show.html.erb). If the request format is JSON, render the data stored in <code>@artist</code> as JSON.
Note the nested JSON objects.</p>
</blockquote>
<p>Let&apos;s demo this in the browser and Postman.</p>
<h3 id="we-do-tunr-artistsindex-10-minutes--100">WE DO: Tunr Artists#index (10 minutes / 1:00)</h3>
<p>Let&apos;s walk through the same process for <code>Artists#index</code>. Where do we start?</p>
<pre><code class="lang-rb"><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">index</span></span>
  <span class="hljs-variable">@artists</span> = <span class="hljs-constant">Artist</span>.all

  respond_to <span class="hljs-keyword">do</span> |format|
    format.html { render <span class="hljs-symbol">:index</span> }
    format.json { render <span class="hljs-symbol">json:</span> <span class="hljs-variable">@artists</span> }
  <span class="hljs-keyword">end</span>
<span class="hljs-keyword">end</span>
</code></pre>
<p>Demonstrate in browser and Postman.</p>
<blockquote>
<p>Does JSON formatting look messy in your browser? Install <a href="https://chrome.google.com/webstore/detail/jsonview/chklaanhfefbnpoihckbnefhakgolnmc?hl=en" target="_blank">JSONview</a>, a Chrome plug-in that displays JSON in a more readable format.</p>
</blockquote>
<h3 id="you-do-tunr-songsindex-and-songsshow-15-minutes--115">YOU DO: Tunr Songs#index and Songs#show (15 minutes / 1:15)</h3>
<p>It&apos;s your turn to do the same for Songs. You should be working in <code>songs_controller.rb</code> for this.</p>
<p><strong>Bonus</strong></p>
<ul>
<li>Make it so that the JSON requests only return <code>title</code>, <code>album</code> and <code>preview_url</code>. No <code>created_at</code> or <code>updated_at</code>.</li>
<li>Make it so that the JSON request to Songs#show also includes the artist.</li>
</ul>
<h2 id="break-10-minutes--125">Break (10 minutes / 1:25)</h2>
<h3 id="i-do-tunr-artistscreate-30-minutes--155">I DO: Tunr Artists#create (30 minutes / 1:55)</h3>
<p>It&apos;s high time we created an Artist. What do we have to change to support this functionality</p>
<ul>
<li>What HTTP request will we be sending? What route and controller action does that correspond to?</li>
<li>What is the purpose of <code>Artists#new</code>?</li>
<li>What do we have to change in <code>Artists#create</code>?</li>
</ul>
<p>Here&apos;s our current code.</p>
<ul>
<li>What&apos;s different about <code>create</code> vs. <code>index</code> and <code>show</code>? What do we need to account for in our <code>respond_to</code> block?</li>
</ul>
<pre><code class="lang-rb"><span class="hljs-comment"># POST /artists</span>
<span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">create</span></span>
  <span class="hljs-variable">@artist</span> = <span class="hljs-constant">Artist</span>.new(artist_params)
  <span class="hljs-keyword">if</span> <span class="hljs-variable">@artist</span>.save
    redirect_to (artist_path(<span class="hljs-variable">@artist</span>))
  <span class="hljs-keyword">else</span>
    render <span class="hljs-symbol">:new</span>
  <span class="hljs-keyword">end</span>
<span class="hljs-keyword">end</span>
</code></pre>
<p>We need to update the response to respond to the format.</p>
<ul>
<li><strong>Q:</strong> What do we want to happen after a successful save? How about an unsuccessful one?</li>
</ul>
<pre><code class="lang-rb"><span class="hljs-comment"># POST /artists</span>
<span class="hljs-comment"># POST /artists.json</span>
<span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">create</span></span>
  <span class="hljs-variable">@artist</span> = <span class="hljs-constant">Artist</span>.new(artist_params)

  respond_to <span class="hljs-keyword">do</span> |format|
    <span class="hljs-keyword">if</span> <span class="hljs-variable">@artist</span>.save
      format.html { redirect_to <span class="hljs-variable">@artist</span>, <span class="hljs-symbol">notice:</span> <span class="hljs-string">&apos;Artist was successfully created.&apos;</span> }
      format.json { render <span class="hljs-symbol">json:</span> <span class="hljs-variable">@artist</span>, <span class="hljs-symbol">status:</span> <span class="hljs-symbol">:created</span>, <span class="hljs-symbol">location:</span> <span class="hljs-variable">@artist</span> }
    <span class="hljs-keyword">else</span>
      format.html { render <span class="hljs-symbol">:new</span> }
      format.json { render <span class="hljs-symbol">json:</span> <span class="hljs-variable">@artist</span>.errors, <span class="hljs-symbol">status:</span> <span class="hljs-symbol">:unprocessable_entity</span> }
    <span class="hljs-keyword">end</span>
  <span class="hljs-keyword">end</span>
<span class="hljs-keyword">end</span>
</code></pre>
<p>If we successfully save the @artist...  </p>
<ul>
<li>When the requested format is &quot;html&quot;, we redirect to the show page for the @artist.  </li>
<li>When the requested format is &quot;json&quot;, we return the @artist as JSON, with an HTTP status of &quot;201 Created&quot;.</li>
</ul>
<p>If save fails...  </p>
<ul>
<li>When the requested format is &quot;html&quot;, we render the :new page to show the human the error of their ways.</li>
<li>When the requested format is &quot;json&quot;, we return the error as JSON and inform the requesting computer that we have an &quot;unprocessable_entity&quot;. Trust me, they&apos;ll understand.</li>
</ul>
<h3 id="testing-artistscreate">Testing Artists#create</h3>
<p>How do we usually test this functionality in the browser? A form!  </p>
<p>Today, we&apos;ll use Postman. It makes POSTing requests easy.</p>
<ol>
<li>Enter url: <code>localhost:3000/artists</code>  </li>
<li>Method: POST  </li>
<li>Add a <code>Content-Type</code> header set to <code>application/json</code></li>
<li>Add your Artist data to &quot;Request Body&quot;.  <pre><code class="lang-json">{ <span class="hljs-string">&quot;artist&quot;</span>: { <span class="hljs-string">&quot;name&quot;</span> : <span class="hljs-string">&quot;Sting&quot;</span> }}
</code></pre>
</li>
<li>Press &quot;Submit&quot;.  </li>
</ol>
<p><img src="http://imgur.com/YFJIShn.png" alt="Postman create error"></p>
<p>The raw response from this request is an error page, rendered as html.  Sometimes you just have to wade through the html.  Scroll down until you get to the &quot;body&quot;.</p>
<pre><code class="lang-html"> <span class="hljs-tag">&lt;<span class="hljs-title">h1</span>&gt;</span>
  ActionController::InvalidAuthenticityToken
    in ArtistsController#create
<span class="hljs-tag">&lt;/<span class="hljs-title">h1</span>&gt;</span>
</code></pre>
<p>Additionally we can preview the html, and see a familiar rails error page.</p>
<p>Ah yes. Rails uses an Authenticity token for security. It will provide it for any request made within a form it renders.  Postman is decidedly not that. Let&apos;s temporarily adjust that setting for testing purposes. When we go back to using html forms, we can set it back.</p>
<p>In our <code>application_controller.rb</code> we must adjust the way Rails protects us by default:</p>
<pre><code class="lang-rb"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">ApplicationController</span> <span class="hljs-inheritance">&lt; <span class="hljs-parent">ActionController::Base</span></span></span>
  <span class="hljs-comment"># Prevent CSRF attacks by raising an exception.</span>
  <span class="hljs-comment"># For APIs, you may want to use :null_session instead.</span>
  <span class="hljs-comment"># protect_from_forgery with: :exception</span>
  <span class="hljs-comment"># support API, see: http://stackoverflow.com/questions/9362910/rails-warning-cant-verify-csrf-token-authenticity-for-json-devise-requests</span>
  protect_from_forgery <span class="hljs-symbol">with:</span> <span class="hljs-symbol">:null_session</span>, <span class="hljs-symbol">if:</span> <span class="hljs-constant">Proc</span>.new { |c| c.request.format == <span class="hljs-string">&apos;application/json&apos;</span> }
<span class="hljs-keyword">end</span>
</code></pre>
<p>Success should look like this...</p>
<p><img src="http://i.imgur.com/7bncv7w.png" alt="Create Artist 200 OK in Postman"></p>
<p>We should now get a <code>200</code> response code signifying a successful <code>post</code> request and we can preview the html page sent back as the response (our newly created artist&apos;s show page)</p>
<h2 id="break-10-minutes--205">Break (10 minutes / 2:05)</h2>
<h3 id="you-do-tunr-songscreate-songsupdate-15-minutes--220">You do: Tunr songs#create, songs#update (15 minutes / 2:20)</h3>
<p>Your turn. Make sure we can create and update Songs via requests that expect JSON.</p>
<h2 id="3rd-party-apis-15-minutes--235">3rd Party APIs (15 minutes / 2:35)</h2>
<p>Other companies have created something similar. Some follow the REST guidelines, some don&apos;t (remember those <a href="https://github.com/ga-dc/curriculum/tree/master/07-apis-express-ajax/apis#good-starter-apis" target="_blank">Starter APIs</a>?). When we want to retrieve information from them we need to make an http request from within our application. There are a few libraries that help with this. We&apos;ll review <a href="https://github.com/jnunemaker/httparty" target="_blank">HTTParty</a>.</p>
<h3 id="demo-httparty">Demo: HTTParty</h3>
<p>After adding it to our Gemfile. We can start using it right away,</p>
<p>We are going to be using <a href="http://www.wunderground.com/weather/api/" target="_blank">weather underground&apos;s api</a> to utilize <code>httparty</code> to make requests and to parse JSON responses.</p>
<blockquote>
<p>Make sure to register for an account, and to generate a free api key.</p>
</blockquote>
<pre><code class="lang-ruby">response = <span class="hljs-constant">HTTParty</span>.get(<span class="hljs-string">&apos;http://api.wunderground.com/api/&lt;your key here&gt;/conditions/q/CA/San_Francisco.json&apos;</span>)
</code></pre>
<p>Checkout the response:</p>
<pre><code class="lang-ruby">response.code
response.message
response.body
response.headers
</code></pre>
<p>Or better yet, you can make a PORO (Plain Old Ruby Object) class and use that.</p>
<pre><code class="lang-ruby"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Forecast</span></span>
  <span class="hljs-comment"># creates getter methods for temp_f, weather, city and state.</span>
  <span class="hljs-keyword">attr_reader</span> <span class="hljs-symbol">:temp_f</span>, <span class="hljs-symbol">:weather</span>, <span class="hljs-symbol">:city</span>, <span class="hljs-symbol">:state</span>

  <span class="hljs-comment"># initialize method takes 2 arguments city and state</span>
  <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">initialize</span><span class="hljs-params">(city, state)</span></span>

    <span class="hljs-comment"># create the url using the city and state arguments. Also utilizing ENV</span>
    <span class="hljs-comment"># variable provided by figaro. Key value should be in &apos;config/application.yml&apos;</span>

    url = <span class="hljs-string">&quot;http://api.wunderground.com/api/<span class="hljs-subst">#{<span class="hljs-constant">ENV</span>[<span class="hljs-string">&quot;wunderground_api_key&quot;</span>]}</span>/conditions/q/<span class="hljs-subst">#{state.gsub(<span class="hljs-regexp">/\s/</span>, <span class="hljs-string">&quot;_&quot;</span>)}</span>/<span class="hljs-subst">#{city.gsub(<span class="hljs-regexp">/\s/</span>, <span class="hljs-string">&quot;_&quot;</span>)}</span>.json&quot;</span>

    <span class="hljs-comment"># utilizing httparty gem to make get request to the url prescribed in the</span>
    <span class="hljs-comment"># line above and storing the response into the variable below.</span>
    response = <span class="hljs-constant">HTTParty</span>.get(url)

    <span class="hljs-comment"># instantiating temp_f and weather by parsing through the JSON response</span>
    <span class="hljs-variable">@temp_f</span> = response[<span class="hljs-string">&quot;current_observation&quot;</span>][<span class="hljs-string">&quot;temp_f&quot;</span>]
    <span class="hljs-variable">@weather</span> = response[<span class="hljs-string">&quot;current_observation&quot;</span>][<span class="hljs-string">&quot;weather&quot;</span>]

    <span class="hljs-comment"># storing arguments as instance varibles in the model</span>
    <span class="hljs-variable">@city</span> = city
    <span class="hljs-variable">@state</span> = state
  <span class="hljs-keyword">end</span>
<span class="hljs-keyword">end</span>
</code></pre>
<p>Currently our model won&#x2019;t work because we haven&#x2019;t defined ENV[&quot;wunderground_api_key&quot;]. We need to make sure we update our <code>config/application.yml</code> file with this information:</p>
<p><code>wunderground_api_key: your_key_info_goes_here</code></p>
<p>Assuming you have a working key, we can now hop into the <code>rails console</code> and test our model out. We can see something like this if we instantiate a new forecast and pass in washington and dc as arguments:</p>
<pre><code class="lang-ruby">washington = <span class="hljs-constant">Forecast</span>.new(<span class="hljs-string">&quot;washington&quot;</span>, <span class="hljs-string">&quot;dc&quot;</span>)
</code></pre>
<pre><code class="lang-ruby">washington.temp_f
washington.weather
</code></pre>
<blockquote>
<p>If you&apos;d like to learn more about APIs and POROs, Andy has a <a href="http://andrewsunglaekim.github.io/Server-side-api-calls-wrapped-in-ruby-classes/" target="_blank">great blog post</a> on the subject.</p>
</blockquote>
<p>You&apos;ll be doing this same sort of thing in much greater detail from the client-side during this afternoon&apos;s <a href="https://github.com/ga-dc/curriculum/tree/master/07-apis-express-ajax/ajax" target="_blank">AJAX lesson</a>!  </p>
<h2 id="conclusion-5-minutes--240">Conclusion (5 minutes / 2:40)</h2>
<p>Review Learning Objectives</p>
<h2 id="resources">Resources:</h2>
<ul>
<li><a href="https://www.getpostman.com/" target="_blank">Postman</a></li>
<li><a href="https://zapier.com/learn/apis/chapter-1-introduction-to-apis/" target="_blank">Intro to APIs</a></li>
<li><a href="https://github.com/ga-dc/weather_teller" target="_blank">Practice with APIs</a></li>
</ul>

                    
                    </section>
                
                
                </div>
            </div>
        </div>

        
        <a href="../../07-apis-express-ajax/readme.html" class="navigation navigation-prev " aria-label="Previous page: APIs/Express/AJAX"><i class="fa fa-angle-left"></i></a>
        
        
        <a href="../../07-apis-express-ajax/ajax/readme.html" class="navigation navigation-next " aria-label="Next page: AJAX"><i class="fa fa-angle-right"></i></a>
        
    </div>
</div>

        
<script src="../../gitbook/app.js"></script>

    
    <script src="../../gitbook/plugins/gitbook-plugin-search/lunr.min.js"></script>
    

    
    <script src="../../gitbook/plugins/gitbook-plugin-search/search.js"></script>
    

    
    <script src="../../gitbook/plugins/gitbook-plugin-sharing/buttons.js"></script>
    

    
    <script src="../../gitbook/plugins/gitbook-plugin-fontsettings/buttons.js"></script>
    

<script>
require(["gitbook"], function(gitbook) {
    var config = {"highlight":{},"search":{"maxIndexSize":1000000},"sharing":{"facebook":true,"twitter":true,"google":false,"weibo":false,"instapaper":false,"vk":false,"all":["facebook","google","twitter","weibo","instapaper"]},"fontsettings":{"theme":"white","family":"sans","size":2}};
    gitbook.start(config);
});
</script>

        
    </body>
    
</html>
