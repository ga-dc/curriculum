<!DOCTYPE HTML>
<html lang="en" >
    
    <head>
        
        <meta charset="UTF-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <title>Views and Controllers | Welcome to GA&#39;s WDI-DC</title>
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="">
        <meta name="generator" content="GitBook 2.6.6">
        
        
        <meta name="HandheldFriendly" content="true"/>
        <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
        <meta name="apple-mobile-web-app-capable" content="yes">
        <meta name="apple-mobile-web-app-status-bar-style" content="black">
        <link rel="apple-touch-icon-precomposed" sizes="152x152" href="../../gitbook/images/apple-touch-icon-precomposed-152.png">
        <link rel="shortcut icon" href="../../gitbook/images/favicon.ico" type="image/x-icon">
        
    <link rel="stylesheet" href="../../gitbook/style.css">
    
        
        <link rel="stylesheet" href="../../gitbook/plugins/gitbook-plugin-highlight/website.css">
        
    
        
        <link rel="stylesheet" href="../../gitbook/plugins/gitbook-plugin-search/search.css">
        
    
        
        <link rel="stylesheet" href="../../gitbook/plugins/gitbook-plugin-fontsettings/website.css">
        
    
    

        
    
    
    <link rel="next" href="../../05-mvc-with-rails/rails-routes-and-resources/readme.html" />
    
    
    <link rel="prev" href="../../05-mvc-with-rails/rails-models-and-migrations/readme.html" />
    

        
    </head>
    <body>
        
        
    <div class="book"
        data-level="4.4"
        data-chapter-title="Views and Controllers"
        data-filepath="05-mvc-with-rails/rails-views-and-controllers/readme.md"
        data-basepath="../.."
        data-revision="Fri Jan 08 2016 19:37:58 GMT+0000 (UTC)"
        data-innerlanguage="">
    

<div class="book-summary">
    <nav role="navigation">
        <ul class="summary">
            
            
            
            

            

            
    
        <li class="chapter " data-level="0" data-path="index.html">
            
                
                    <a href="../../index.html">
                
                        <i class="fa fa-check"></i>
                        
                        An Introduction
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="1" data-path="01-front-end-fundamentals/readme.html">
            
                
                    <a href="../../01-front-end-fundamentals/readme.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>1.</b>
                        
                        Front End Fundamentals
                    </a>
            
            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.1" data-path="01-front-end-fundamentals/command-line/readme.html">
            
                
                    <a href="../../01-front-end-fundamentals/command-line/readme.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>1.1.</b>
                        
                        Command Line Interface
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="1.2" data-path="01-front-end-fundamentals/git/readme.html">
            
                
                    <a href="../../01-front-end-fundamentals/git/readme.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>1.2.</b>
                        
                        Git
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="1.3" data-path="01-front-end-fundamentals/intro-to-web-and-html/readme.html">
            
                
                    <a href="../../01-front-end-fundamentals/intro-to-web-and-html/readme.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>1.3.</b>
                        
                        Intro to Web and HTML
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="1.4" data-path="01-front-end-fundamentals/css/readme.html">
            
                
                    <a href="../../01-front-end-fundamentals/css/readme.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>1.4.</b>
                        
                        CSS
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="1.5" data-path="01-front-end-fundamentals/javascript-data-types/readme.html">
            
            <span><b>1.5.</b> JavaScript Data Types</span>
            
            
        </li>
    
        <li class="chapter " data-level="1.6" data-path="01-front-end-fundamentals/javascript-loops-conditionals/readme.html">
            
            <span><b>1.6.</b> JavaScript Loops and Conditionals</span>
            
            
        </li>
    
        <li class="chapter " data-level="1.7" data-path="01-front-end-fundamentals/javascript-objects-functions/readme.html">
            
                
                    <a href="../../01-front-end-fundamentals/javascript-objects-functions/readme.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>1.7.</b>
                        
                        JavaScript Objects and Functions
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="1.8" data-path="01-front-end-fundamentals/javascript-DOM/readme.html">
            
                
                    <a href="../../01-front-end-fundamentals/javascript-DOM/readme.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>1.8.</b>
                        
                        JavaScript DOM
                    </a>
            
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="2" data-path="02-intermediate-front-end/readme.html">
            
                
                    <a href="../../02-intermediate-front-end/readme.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>2.</b>
                        
                        Intermediate Front End
                    </a>
            
            
            <ul class="articles">
                
    
        <li class="chapter " data-level="2.1" data-path="02-intermediate-front-end/scope-context-closures/readme.html">
            
                
                    <a href="../../02-intermediate-front-end/scope-context-closures/readme.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>2.1.</b>
                        
                        Scope, Context, and Closures
                    </a>
            
            
            <ul class="articles">
                
    
        <li class="chapter " data-level="2.1.1" data-path="02-intermediate-front-end/scope-context-closures/scope.html">
            
                
                    <a href="../../02-intermediate-front-end/scope-context-closures/scope.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>2.1.1.</b>
                        
                        Scope
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="2.1.2" data-path="02-intermediate-front-end/scope-context-closures/context.html">
            
                
                    <a href="../../02-intermediate-front-end/scope-context-closures/context.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>2.1.2.</b>
                        
                        Context
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="2.1.3" data-path="02-intermediate-front-end/scope-context-closures/closures.html">
            
                
                    <a href="../../02-intermediate-front-end/scope-context-closures/closures.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>2.1.3.</b>
                        
                        Closures
                    </a>
            
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="2.2" data-path="02-intermediate-front-end/events-and-callbacks/readme.html">
            
                
                    <a href="../../02-intermediate-front-end/events-and-callbacks/readme.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>2.2.</b>
                        
                        Events and Callbacks
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="2.3" data-path="02-intermediate-front-end/git_branching/readme.html">
            
                
                    <a href="../../02-intermediate-front-end/git_branching/readme.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>2.3.</b>
                        
                        Git Branching
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="2.4" data-path="02-intermediate-front-end/jquery/jquery-intro-selectors.html">
            
                
                    <a href="../../02-intermediate-front-end/jquery/jquery-intro-selectors.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>2.4.</b>
                        
                        jQuery
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="2.5" data-path="02-intermediate-front-end/jquery/jquery-two.html">
            
                
                    <a href="../../02-intermediate-front-end/jquery/jquery-two.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>2.5.</b>
                        
                        jQuery 2
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="2.6" data-path="02-intermediate-front-end/workflows/lesson_plan.html">
            
            <span><b>2.6.</b> Workflows</span>
            
            
        </li>
    
        <li class="chapter " data-level="2.7" data-path="02-intermediate-front-end/css2/readme.html">
            
                
                    <a href="../../02-intermediate-front-end/css2/readme.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>2.7.</b>
                        
                        CSS 2 (Layout &amp; Fonts)
                    </a>
            
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="3" data-path="04-ruby-mvc-sinatra/readme.html">
            
                
                    <a href="../../04-ruby-mvc-sinatra/readme.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>3.</b>
                        
                        Ruby + MVC with Sinatra
                    </a>
            
            
            <ul class="articles">
                
    
        <li class="chapter " data-level="3.1" data-path="04-ruby-mvc-sinatra/ruby-basics/readme.html">
            
                
                    <a href="../../04-ruby-mvc-sinatra/ruby-basics/readme.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>3.1.</b>
                        
                        Ruby Basics
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="3.2" data-path="04-ruby-mvc-sinatra/ruby-enumerables/readme.html">
            
                
                    <a href="../../04-ruby-mvc-sinatra/ruby-enumerables/readme.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>3.2.</b>
                        
                        Ruby Enumerables
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="3.3" data-path="04-ruby-mvc-sinatra/problem_modeling/readme.html">
            
            <span><b>3.3.</b> Problem Modeling</span>
            
            
        </li>
    
        <li class="chapter " data-level="3.4" data-path="04-ruby-mvc-sinatra/domain_modeling/readme.html">
            
                
                    <a href="../../04-ruby-mvc-sinatra/domain_modeling/readme.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>3.4.</b>
                        
                        Domain Modeling
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="3.5" data-path="04-ruby-mvc-sinatra/databases/readme.html">
            
                
                    <a href="../../04-ruby-mvc-sinatra/databases/readme.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>3.5.</b>
                        
                        Databases
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="3.6" data-path="04-ruby-mvc-sinatra/active-record-intro/readme.html">
            
                
                    <a href="../../04-ruby-mvc-sinatra/active-record-intro/readme.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>3.6.</b>
                        
                        Active Record
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="3.7" data-path="04-ruby-mvc-sinatra/sinatra-rest/readme.html">
            
                
                    <a href="../../04-ruby-mvc-sinatra/sinatra-rest/readme.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>3.7.</b>
                        
                        Sinatra &amp; REST
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="3.8" data-path="04-ruby-mvc-sinatra/sinatra-and-activerecord/readme.html">
            
                
                    <a href="../../04-ruby-mvc-sinatra/sinatra-and-activerecord/readme.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>3.8.</b>
                        
                        Sinatra &amp; Active Record
                    </a>
            
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="4" data-path="05-mvc-with-rails/readme.html">
            
                
                    <a href="../../05-mvc-with-rails/readme.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>4.</b>
                        
                        MVC with Rails
                    </a>
            
            
            <ul class="articles">
                
    
        <li class="chapter " data-level="4.1" data-path="05-mvc-with-rails/rspec/readme.html">
            
                
                    <a href="../../05-mvc-with-rails/rspec/readme.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>4.1.</b>
                        
                        Unit Testing with RSpec
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="4.2" data-path="05-mvc-with-rails/MVC-intro-to-rails/readme.html">
            
                
                    <a href="../../05-mvc-with-rails/MVC-intro-to-rails/readme.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>4.2.</b>
                        
                        MVC Intro to Rails
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="4.3" data-path="05-mvc-with-rails/rails-models-and-migrations/readme.html">
            
                
                    <a href="../../05-mvc-with-rails/rails-models-and-migrations/readme.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>4.3.</b>
                        
                        Models and Migrations
                    </a>
            
            
        </li>
    
        <li class="chapter active" data-level="4.4" data-path="05-mvc-with-rails/rails-views-and-controllers/readme.html">
            
                
                    <a href="../../05-mvc-with-rails/rails-views-and-controllers/readme.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>4.4.</b>
                        
                        Views and Controllers
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="4.5" data-path="05-mvc-with-rails/rails-routes-and-resources/readme.html">
            
                
                    <a href="../../05-mvc-with-rails/rails-routes-and-resources/readme.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>4.5.</b>
                        
                        Routes and Resources
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="4.6" data-path="05-mvc-with-rails/rails-helpers/readme.html">
            
                
                    <a href="../../05-mvc-with-rails/rails-helpers/readme.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>4.6.</b>
                        
                        Helpers
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="4.7" data-path="05-mvc-with-rails/rails-error-handling/readme.html">
            
                
                    <a href="../../05-mvc-with-rails/rails-error-handling/readme.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>4.7.</b>
                        
                        Error Handling and Validations
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="4.8" data-path="05-mvc-with-rails/rails-sessions-and-auth/readme.html">
            
                
                    <a href="../../05-mvc-with-rails/rails-sessions-and-auth/readme.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>4.8.</b>
                        
                        Sessions and Auth
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="4.9" data-path="05-mvc-with-rails/rails-deployment/readme.html">
            
                
                    <a href="../../05-mvc-with-rails/rails-deployment/readme.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>4.9.</b>
                        
                        Deployment
                    </a>
            
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="5" data-path="07-apis-express-ajax/readme.html">
            
                
                    <a href="../../07-apis-express-ajax/readme.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>5.</b>
                        
                        APIs/Express/AJAX
                    </a>
            
            
            <ul class="articles">
                
    
        <li class="chapter " data-level="5.1" data-path="07-apis-express-ajax/apis/readme.html">
            
                
                    <a href="../../07-apis-express-ajax/apis/readme.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>5.1.</b>
                        
                        Building APIs in Rails
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="5.2" data-path="07-apis-express-ajax/ajax/readme.html">
            
                
                    <a href="../../07-apis-express-ajax/ajax/readme.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>5.2.</b>
                        
                        AJAX
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="5.3" data-path="07-apis-express-ajax/prototypes_and_constructors/readme.html">
            
                
                    <a href="../../07-apis-express-ajax/prototypes_and_constructors/readme.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>5.3.</b>
                        
                        Prototypes and Constructors
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="5.4" data-path="07-apis-express-ajax/express_intro/readme.html">
            
                
                    <a href="../../07-apis-express-ajax/express_intro/readme.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>5.4.</b>
                        
                        Intro to Express
                    </a>
            
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="6" data-path="08-single-page-web-apps/readme.html">
            
                
                    <a href="../../08-single-page-web-apps/readme.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>6.</b>
                        
                        Single Page Web Apps
                    </a>
            
            
            <ul class="articles">
                
    
        <li class="chapter " data-level="6.1" data-path="08-single-page-web-apps/express_2/readme.html">
            
                
                    <a href="../../08-single-page-web-apps/express_2/readme.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>6.1.</b>
                        
                        Express Routing / APIs
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="6.2" data-path="08-single-page-web-apps/mongo_mongoose/readme.html">
            
                
                    <a href="../../08-single-page-web-apps/mongo_mongoose/readme.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>6.2.</b>
                        
                        Mongo and Mongoose
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="6.3" data-path="08-single-page-web-apps/node-express-user-authentication/readme.html">
            
                
                    <a href="../../08-single-page-web-apps/node-express-user-authentication/readme.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>6.3.</b>
                        
                        Local Authentication using Passport
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="6.4" data-path="08-single-page-web-apps/oauth-via-3rd-party-apps/readme.html">
            
            <span><b>6.4.</b> OAuth using Passport</span>
            
            
        </li>
    
        <li class="chapter " data-level="6.5" data-path="08-single-page-web-apps/oojs1_read/readme.html">
            
            <span><b>6.5.</b> Object-Oriented FE JS: R / CRUD</span>
            
            
        </li>
    
        <li class="chapter " data-level="6.6" data-path="08-single-page-web-apps/oojs2_create_update_destroy/readme.html">
            
            <span><b>6.6.</b> Object-Oriented FE JS: CUD / CRUD</span>
            
            
        </li>
    
        <li class="chapter " data-level="6.7" data-path="08-single-page-web-apps/git-teams/readme.html">
            
                
                    <a href="../../08-single-page-web-apps/git-teams/readme.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>6.7.</b>
                        
                        Git Team Workflows
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="6.8" data-path="08-single-page-web-apps/responsive-web-design/readme.html">
            
                
                    <a href="../../08-single-page-web-apps/responsive-web-design/readme.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>6.8.</b>
                        
                        Responsive Web Design
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="6.9" data-path="08-single-page-web-apps/tdd/readme.html">
            
                
                    <a href="../../08-single-page-web-apps/tdd/readme.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>6.9.</b>
                        
                        TDD JS using Jasmine
                    </a>
            
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="7" data-path="10-angular/readme.html">
            
                
                    <a href="../../10-angular/readme.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>7.</b>
                        
                        MVW with Angular
                    </a>
            
            
            <ul class="articles">
                
    
        <li class="chapter " data-level="7.1" data-path="10-angular/angular_intro_controllers_directives/readme.html">
            
            <span><b>7.1.</b> Angular Intro: Controllers &amp; Directives</span>
            
            
        </li>
    
        <li class="chapter " data-level="7.2" data-path="10-angular/services_templates_and_routing/readme.html">
            
            <span><b>7.2.</b> Services, Templates, and Routing</span>
            
            
        </li>
    
        <li class="chapter " data-level="7.3" data-path="10-angular/custom_directives/readme.html">
            
            <span><b>7.3.</b> Custom Directives</span>
            
            
        </li>
    
        <li class="chapter " data-level="7.4" data-path="10-angular/firebase_in_angular/readme.html">
            
            <span><b>7.4.</b> AngularFire: Firebase &amp; Angular</span>
            
            
        </li>
    
        <li class="chapter " data-level="7.5" data-path="10-angular/angular-vs-rails.html">
            
                
                    <a href="../../10-angular/angular-vs-rails.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>7.5.</b>
                        
                        Angular vs. Rails
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="7.6" data-path="11-multi-track/readme.html">
            
                
                    <a href="../../11-multi-track/readme.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>7.6.</b>
                        
                        Back and Front of Front End
                    </a>
            
            
            <ul class="articles">
                
    
        <li class="chapter " data-level="7.6.1" >
            
            <span><b>7.6.1.</b> BackBone</span>
            
            
            <ul class="articles">
                
    
        <li class="chapter " data-level="7.6.1.1" data-path="11-multi-track/bb_models_collections/readme.html">
            
                
                    <a href="../../11-multi-track/bb_models_collections/readme.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>7.6.1.1.</b>
                        
                        Models and Collections
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="7.6.1.2" data-path="11-multi-track/bb_views_part1/readme.html">
            
                
                    <a href="../../11-multi-track/bb_views_part1/readme.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>7.6.1.2.</b>
                        
                        Views (part 1)
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="7.6.1.3" data-path="11-multi-track/bb_views_part2/readme.html">
            
                
                    <a href="../../11-multi-track/bb_views_part2/readme.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>7.6.1.3.</b>
                        
                        Views (part 2)
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="7.6.1.4" data-path="11-multi-track/bb_routers/readme.html">
            
                
                    <a href="../../11-multi-track/bb_routers/readme.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>7.6.1.4.</b>
                        
                        Routers
                    </a>
            
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="7.6.2" >
            
            <span><b>7.6.2.</b> Front End</span>
            
            
            <ul class="articles">
                
    
        <li class="chapter " data-level="7.6.2.1" data-path="11-multi-track/bootstrap/readme.html">
            
                
                    <a href="../../11-multi-track/bootstrap/readme.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>7.6.2.1.</b>
                        
                        Bootstrap
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="7.6.2.2" data-path="11-multi-track/flexbox/readme.html">
            
                
                    <a href="../../11-multi-track/flexbox/readme.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>7.6.2.2.</b>
                        
                        Flex Box
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="7.6.2.3" data-path="11-multi-track/foundation/readme.html">
            
                
                    <a href="../../11-multi-track/foundation/readme.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>7.6.2.3.</b>
                        
                        Foundation
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="7.6.2.4" data-path="11-multi-track/intro-to-php/readme.html">
            
            <span><b>7.6.2.4.</b> Intro to PHP</span>
            
            
        </li>
    
        <li class="chapter " data-level="7.6.2.5" data-path="11-multi-track/jquery-plugins/readme.html">
            
                
                    <a href="../../11-multi-track/jquery-plugins/readme.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>7.6.2.5.</b>
                        
                        jQuery Plugins
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="7.6.2.6" data-path="11-multi-track/mapping/readme.html">
            
                
                    <a href="../../11-multi-track/mapping/readme.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>7.6.2.6.</b>
                        
                        Mapping
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="7.6.2.7" data-path="11-multi-track/pseudo-selectors/readme.html">
            
                
                    <a href="../../11-multi-track/pseudo-selectors/readme.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>7.6.2.7.</b>
                        
                        Pseudo Selectors
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="7.6.2.8" data-path="11-multi-track/sass1-basic-reuse/readme.html">
            
                
                    <a href="../../11-multi-track/sass1-basic-reuse/readme.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>7.6.2.8.</b>
                        
                        Sass 1: Basic Reuse
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="7.6.2.9" data-path="11-multi-track/sass2-control-directives/readme.html">
            
                
                    <a href="../../11-multi-track/sass2-control-directives/readme.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>7.6.2.9.</b>
                        
                        Sass 2: Control Directives
                    </a>
            
            
        </li>
    

            </ul>
            
        </li>
    

            </ul>
            
        </li>
    

            </ul>
            
        </li>
    


            
            <li class="divider"></li>
            <li>
                <a href="https://www.gitbook.com" target="blank" class="gitbook-link">
                    Published with GitBook
                </a>
            </li>
            
        </ul>
    </nav>
</div>

    <div class="book-body">
        <div class="body-inner">
            <div class="book-header" role="navigation">
    <!-- Actions Left -->
    

    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href="../../" >Welcome to GA&#39;s WDI-DC</a>
    </h1>
</div>

            <div class="page-wrapper" tabindex="-1" role="main">
                <div class="page-inner">
                
                
                    <section class="normal" id="section-">
                    
                        <h1 id="views-and-controllers">Views and Controllers</h1>
<h2 id="learning-objectives">Learning Objectives</h2>
<ul>
<li>Describe the roles of controllers and views in a Rails app</li>
<li>Explain how the router directs requests to a specific controller and action</li>
<li>Explain how controller actions map to specific views</li>
<li>Describe the Rails convention for implicitly rendering a view from an action</li>
<li>Use <code>strong_params</code> to limit what attributes can be modified</li>
<li>Describe the role of instance variables in sharing information between an action and its view</li>
<li>Differentiate between <code>redirect</code> and  <code>render</code></li>
</ul>
<h2 id="opening-framing-55">Opening Framing (5/5)</h2>
<p>Last week, you got a quick overview of the full MVC structure of a Rails app by porting Tunr from Sinatra into Rails.</p>
<p>As a quick review: <strong>(ST-WG):</strong> Why is the MVC structure so important?</p>
<blockquote>
<p>Interesting to note, the early MVC artchitects layed the foundational building blocks paving the way for the launch of GUI programming: <a href="https://en.wikipedia.org/wiki/Model%E2%80%93view%E2%80%93controller#History" target="_blank">MVC History</a></p>
</blockquote>
<p>Today, we&apos;re going to continue the deeper dive into the why and how of &quot;The Rails Way&quot; for each of the major components of the MVC structure.</p>
<p> The M, Models &amp; Migrations gave us a systematic,iterable way to organize, store, retrieve, and modify a database, using ActiveRecord as an interface to map our database tables into objects in Ruby.</p>
<p> Views &amp; Controllers will build on that, allowing us to do more with that structured data. But what..?</p>
<h3 id="doc-dive-510">Doc Dive (5/10)</h3>
<p>Read Parts 1-3: <a href="http://guides.rubyonrails.org/action_controller_overview.html" target="_blank">http://guides.rubyonrails.org/action_controller_overview.html</a></p>
<h3 id="turn--talk-515">Turn &amp; Talk (5/15)</h3>
<p>With a partner, discuss:</p>
<ol>
<li>What is the role of a controller in a Rails application?</li>
<li>What are the conventions for naming Rails controllers?</li>
<li>What are the benefits following the &apos;Rails Way&apos;?</li>
</ol>
<h3 id="rmvc-revisited-1025">rMVC: Revisited (10/25)</h3>
<p>The design pattern that rails is built around is rMVC - Router, Model, View and Controller.</p>
<p><img src="images/mvc_diagram.png" alt="rMVC"></p>
<p><strong>Question:</strong> Who can remind us what the role of a view is in a Rails application?</p>
<p>Life Cycle of a request/response in Rails:</p>
<ol>
<li><p>A user of our web application submits a request to our application&apos;s server. It can come in a myriad of ways. Maybe someone typing in a URL and hitting enter or maybe a user submitting a form on our application.</p>
</li>
<li><p>The request hits the router of the application.</p>
</li>
<li><p>The application than either doesn&apos;t recognize the route (error) or it does recognize it(route) and sends it to a controller.</p>
</li>
<li><p>Once the request hits the controller, its then going to query the database through Active Record(the model) for the information specified in the controller.</p>
</li>
<li><p>Once the controller has the information from the model that it needs it sends it to the view</p>
</li>
<li><p>The view takes the objects from the controller and sends a response to the user.</p>
</li>
</ol>
<p>Let&apos;s dive into an example, and see MVC in action by writing some rails code.</p>
<h2 id="setup-530">Set-Up (5/30)</h2>
<p>This lesson will build directly off of the work you did with Models and Migrations.</p>
<p>If you would prefer to work with a clean starter rather than building on your existing copy:</p>
<pre><code class="lang-bash">git <span class="hljs-built_in">clone</span> git@github.com:ga-dc/tunr_rails_models_and_migrations.git
<span class="hljs-built_in">cd</span> tunr_rails_models_and_migrations
git checkout views-controllers-starter
git checkout -b inclass
</code></pre>
<p>Make sure to remember to run:</p>
<pre><code>bundle install
rake db:create
# ^Only if you do not have a tunr_db database
rake db:migrate
</code></pre><p>Make sure to seed the db if you haven not already.</p>
<p>A good place to start reviewing our code base so far, in any rails app, is our application&apos;s routes.</p>
<h2 id="routecontrolleraction-relationship-1040">Route-Controller-Action Relationship (10/40)</h2>
<p>Make sure you are in the applications directory and in your terminal run:
 <code>$ rake routes</code></p>
<pre><code class="lang-bash">Prefix      Verb   URI Pattern                 Controller<span class="hljs-comment">#Action</span>
    artists GET    /artists(.:format)          artists<span class="hljs-comment">#index</span>
artists_new GET    /artists/new(.:format)      artists<span class="hljs-comment">#new</span>
            POST   /artists(.:format)          artists<span class="hljs-comment">#create</span>
            GET    /artists/:id(.:format)      artists<span class="hljs-comment">#show</span>
            GET    /artists/:id/edit(.:format) artists<span class="hljs-comment">#edit</span>
            PUT    /artists/:id(.:format)      artists<span class="hljs-comment">#update</span>
            DELETE /artists/:id(.:format)      artists<span class="hljs-comment">#destroy</span>
</code></pre>
<p>Rake routes allows us at any time to view the current routes of this app and see the controller actions mapped to each route.</p>
<p>For example, let&apos;s look at the request/response life cycle of a get request hitting the artists index action.</p>
<p>When a user visits: <code>http:localhost:3000/artists</code></p>
<ul>
<li><p>The user types in a url, which triggers a request to the server. It hits the router. The router says, &quot;a GET request to the &apos;/artists&apos; path? No problem! Hey, artists controller, you need to perform the index action&quot;</p>
</li>
<li><p>The artists controller says, &quot;An index action? I&apos;ve got one of those. Lets see, it says here I need to ask the model for information about all of the artists. Hey, ActiveRecord Model, gimme that data!&quot;</p>
</li>
<li><p>Thanks for all the artists, Now I&apos;m going to send all this information to the view. The view than generates a response to the client.</p>
</li>
</ul>
<p>Let&apos;s write the code to make this response a reality.</p>
<h2 id="wedo-define-an-index-action-and-view-1555">WE-Do: Define an Index Action and View (15/55)</h2>
<p>We need to first create a controller for our artists. In your terminal:</p>
<pre><code class="lang-bash"> $ touch app/controllers/artists_controller.rb
</code></pre>
<blockquote>
<p><strong>Note</strong> the convention for naming this file: plural resource name, snake_case</p>
</blockquote>
<p>In that file, let&apos;s define our controller</p>
<pre><code class="lang-ruby"><span class="hljs-comment"># in app/controllers/artists_controller.rb</span>
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">ArtistsController</span> <span class="hljs-inheritance">&lt; <span class="hljs-parent">ApplicationController</span></span></span>
  <span class="hljs-comment"># actions will go here</span>
<span class="hljs-keyword">end</span>
</code></pre>
<p>Great, now that we have a new controller for artists, let&apos;s go over what we want to include in our controller.</p>
<p>Recalling from our routes, there are 7 RESTful calls that the router has mapped to our <code>artists_controller</code> actions.</p>
<p>Right now we know our controller is pretty blank, but let&apos;s fire up our server:</p>
<pre><code class="lang-bash">$ rails s <span class="hljs-comment"># short for rails server</span>
</code></pre>
<p>and in our browser, visit the route to view all artists:</p>
<p><code>http://localhost:3000/artists</code></p>
<p>What do we see?
<br>
<img src="images/unknown_action.png" alt="unknown_action"></p>
<p>When we go to <code>http://localhost:3000/artists</code> our router says it knows where to send it. It&apos;s sending it to the artists controller and expects it to do the index action. Unfortunately we haven&apos;t defined it yet, so it&apos;s unknown. Let&apos;s go ahead and define that action now</p>
<p>In <code>app/controllers/artists_controller.rb</code>:</p>
<pre><code class="lang-ruby"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">ArtistsController</span> <span class="hljs-inheritance">&lt; <span class="hljs-parent">ApplicationController</span></span></span>

  <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">index</span></span>

  <span class="hljs-keyword">end</span>
<span class="hljs-keyword">end</span>
</code></pre>
<blockquote>
<p>In rails methods defined in our controllers are known as <code>actions</code></p>
</blockquote>
<p>Great let&apos;s reload:
<img src="images/template_missing.png" alt="template_missing"></p>
<p>Another error... We&apos;ll get more into this later. But this one is yelling at us for not having a view(template) yet. Specifically in this case, the index view. So let&apos;s create that. Let&apos;s first make a directory and file in the terminal:</p>
<pre><code class="lang-bash">$ mkdir app/views/artists
$ touch app/views/artists/index.html.erb
</code></pre>
<blockquote>
<p>Note the conventions here. We needed to make an <code>artists</code> folder to put the <code>index.html.erb</code> in it. This is important because when we define an <code>action</code> in our controller, rails knows to render the view corresponding to the controller and action. In this example, because were calling the <code>index</code> action in the <code>artists_controller</code>, it&apos;ll look for the <code>index</code> view in the <code>artists</code> folder.</p>
</blockquote>
<p>Inside <code>app/views/artist/index.html.erb</code>:
Just put: <code>&lt;h1&gt;All Artists&lt;/h1&gt;</code></p>
<p>Great, now let&apos;s refresh the page and there should be no more errors so we know everything has been wired up correctly!</p>
<p>However, let&apos;s think about what we really want to see when we visit this page. When we visit <code>/artists</code>, we expect to see information about all artists!</p>
<p>So now the question is how can we dynamically generate a view for all of our data about artists?</p>
<h3 id="instance-variables">Instance Variables</h3>
<p>Recall from our Sinatra lessons how we used instance variables in our controllers.</p>
<p><strong>Question:</strong> What is the importance of instance variables in controller actions?</p>
<p>We use instance variables in our controller actions, so we can have programmatic access to variables inside of our views. More often than not these instance variables will contain objects from the database.</p>
<p>Let&apos;s use our friend Active Record to query our database for all artists and save that to an instance variable.</p>
<p>In the index action:</p>
<pre><code class="lang-ruby"><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">index</span></span>
  <span class="hljs-variable">@artists</span> = <span class="hljs-constant">Artist</span>.all
<span class="hljs-keyword">end</span>
</code></pre>
<p>Now, in our index view, we have programmatic access to the variable <code>@artists</code>!</p>
<blockquote>
<p>It should be noted that while we practice a separation of concerns we aren&apos;t just limited to querying for only artists in the artists controller. Additionally, we can store just about anything we could have normally stored in a ruby variable.</p>
</blockquote>
<p>Let&apos;s write some code in our view to display this data.</p>
<p>In our <code>app/views/artists/index.html.erb</code></p>
<pre><code class="lang-html"><span class="hljs-tag">&lt;<span class="hljs-title">h1</span>&gt;</span>Artists <span class="hljs-tag">&lt;<span class="hljs-title">a</span> <span class="hljs-attribute">href</span>=<span class="hljs-value">&quot;/artists/new&quot;</span>&gt;</span>(+)<span class="hljs-tag">&lt;/<span class="hljs-title">a</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-title">h1</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-title">ul</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-title">%</span> @<span class="hljs-attribute">artists.each</span> <span class="hljs-attribute">do</span> |<span class="hljs-attribute">artist</span>| %&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">li</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-title">a</span> <span class="hljs-attribute">href</span>=<span class="hljs-value">&quot;/artists/&lt;%= artist.id %&gt;&quot;</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-title">%=</span> <span class="hljs-attribute">artist.name</span> %&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-title">a</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-title">li</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-title">%</span> <span class="hljs-attribute">end</span> %&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-title">ul</span>&gt;</span>
</code></pre>
<p>Now when we visit <code>/artists</code> in the browser, we see a list (index) of all artists. We have included links to the new page, and for the show page, but we haven&apos;t created those yet so....</p>
<h3 id="youdo-show-and-new-actions-1570">You-Do: Show and New Actions (15/70)</h3>
<ul>
<li>Define <code>show</code>, and <code>new</code> controller actions for artists</li>
<li>Create <code>show</code>, and <code>new</code> views for artists</li>
<li>Display relevant info for an artist when you visit their show page</li>
<li>When you visit the <code>new</code> page, the relevant form should be displayed</li>
<li>Don&apos;t worry about submitting the form just yet</li>
</ul>
<h2 id="break-1080">BREAK (10/80)</h2>
<h2 id="wedo-artists-create-action-20100">WE-DO: Artists Create Action (20/100)</h2>
<p>So at this point we have a way to see all artists, view info about a specific artist, as well as see a form to add a new artist.</p>
<pre><code class="lang-rb">&lt;form action=&quot;/artists&quot; method=&quot;post&quot; &gt;
  &lt;label for=&quot;name&quot;&gt;Name:&lt;/label&gt;
  &lt;input name=&quot;name&quot;&gt;

  &lt;label for=&quot;photo_url&quot;&gt;Photo URL:&lt;/label&gt;
  &lt;input name=&quot;photo_url&quot;&gt;

  &lt;label for=&quot;nationality&quot;&gt;Nationality:&lt;/label&gt;
  &lt;input name=&quot;nationality&quot;&gt;

  &lt;input type=&quot;submit&quot; value=&quot;Create&quot;&gt;
&lt;/form&gt;
</code></pre>
<p>But what happens when we try to submit this form?</p>
<p>If we were looking in our browser, we would get our old friend <code>unkown action</code> error, saying:
<code>The action &apos;create&apos; could not be found for ArtistsController</code></p>
<p>Let&apos;s write that action for our controller and get this form to work.</p>
<p>In <code>app/controllers/artists_controller.rb</code>:</p>
<pre><code class="lang-ruby"><span class="hljs-comment"># Artists#Create</span>
<span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">create</span></span>
  <span class="hljs-variable">@artist</span> = <span class="hljs-constant">Artist</span>.create!(<span class="hljs-symbol">name:</span> params[<span class="hljs-symbol">:name</span>], <span class="hljs-symbol">nationality:</span> params[<span class="hljs-symbol">:nationality</span>], <span class="hljs-symbol">photo_url:</span> params[<span class="hljs-symbol">:photo_url</span>])
<span class="hljs-keyword">end</span>
</code></pre>
<p>With this action, we want to create an instance using the params the user entered into the form, and we also set up a check  to see whether or not the model was stored in our database.</p>
<p>When the request completes, we now need to worry about where to direct the user after adding a new artist.</p>
<h3 id="authenticity-tokens">Authenticity Tokens</h3>
<p>Let&apos;s go to our form in our browser at <code>http:localhost:3000/artists/new</code> and try to add an artist.</p>
<p>What happens?</p>
<pre><code># ERROR!
# ActionController::InvalidAuthenticityToken in ArtistsController#create
</code></pre><p>What&apos;s going on here?</p>
<p>Rails is setup such that it doesn&apos;t allow just any parameters to be accompanied by a request. This is why we had to do some additional configuration changes to get our Sinatra forms to work.</p>
<p>How to do we solve this?</p>
<p>Any time a user views a form to create, update or destroy a resource, the rails app creates a random <code>authenticity_token</code> and stores it in a session. When the user than submits the form, rails will look for the <code>authenticity_token</code> compares it to the one stored in the session, and if they match, allow the request to continue.</p>
<p>If someone was trying to update our database in some way other than our application, it would be denied.</p>
<p>The first thing that I want do is add the authenticity_token in our <code>new</code> form.</p>
<p>Add the hidden input field that contains the auth token in `app/views/artists/new.html.erb&apos;:</p>
<pre><code class="lang-html"><span class="hljs-tag">&lt;<span class="hljs-title">form</span> <span class="hljs-attribute">action</span>=<span class="hljs-value">&quot;/artists&quot;</span> <span class="hljs-attribute">method</span>=<span class="hljs-value">&quot;post&quot;</span> &gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-title">input</span> <span class="hljs-attribute">type</span>=<span class="hljs-value">&quot;hidden&quot;</span> <span class="hljs-attribute">name</span>=<span class="hljs-value">&quot;authenticity_token&quot;</span> <span class="hljs-attribute">value</span>=<span class="hljs-value">&quot;&lt;%= form_authenticity_token %&gt;&quot;</span>&gt;</span>
  ... more form code
</code></pre>
<p>Great, so now that we added an random authenticity_token to each request as an extra layer of security, we should be good to go right?!</p>
<h3 id="render-vs-redirect-5105">Render vs Redirect (5/105)</h3>
<p>Like Sinatra, Rails has many ways to map our app&apos;s logic navigating a user&apos;s request to a response they care about.</p>
<p>For example, taking a closer look at index action of our Artists Controller:</p>
<pre><code class="lang-ruby"><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">index</span></span>
  <span class="hljs-variable">@artists</span> = <span class="hljs-constant">Artist</span>.all
<span class="hljs-keyword">end</span>
</code></pre>
<p><strong>Question:</strong> How did we see the artists index view page, when we went to our index route?</p>
<p>If we remember back to Sinatra, you&apos;ll notice that we&apos;re not explicitly telling the application which view file to render.</p>
<p>That&apos;s because rails has implicit rendering. Basically rails is smart enough to know if the artists controller action is called index, then it will look for the index view in the artist folder.</p>
<p>You can explicitly change the implicit render by calling the <code>render</code> method in the action of a controller. Something like this:</p>
<pre><code class="lang-ruby"><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">index</span></span>
  <span class="hljs-variable">@artists</span> = <span class="hljs-constant">Artist</span>.all
  render <span class="hljs-symbol">:index</span>
<span class="hljs-keyword">end</span>
</code></pre>
<p>You could also redirect rather than render. <strong>(ST-WG):</strong> What are the differences between redirecting and rendering?</p>
<h2 id="ido-sanitizationstrong-params-10115">(I-DO) Sanitization/Strong Params (10/115)</h2>
<p>Looking at the code for the <code>artists#create</code> method, we find this line:</p>
<pre><code class="lang-rb">  <span class="hljs-variable">@artist</span> = <span class="hljs-constant">Artist</span>.create!(<span class="hljs-symbol">name:</span> params[<span class="hljs-symbol">:name</span>], <span class="hljs-symbol">nationality:</span> params[<span class="hljs-symbol">:nationality</span>], <span class="hljs-symbol">photo_url:</span> params[<span class="hljs-symbol">:photo_url</span>])
</code></pre>
<p>We&apos;re only submitting 3 fields so that&apos;s not so bad, but if we were submitting 50 fields that would mean we have to write a HUGE line.</p>
<p>If only there was some way to not have to do that!</p>
<p>Instead of one argument for each field in a record, <code>.create</code> can actually take one argument in total that is a hash of all the fields that should be updated. For instance:</p>
<pre><code class="lang-rb"><span class="hljs-variable">@artist</span> = <span class="hljs-constant">Artist</span>.create!({
  <span class="hljs-symbol">name:</span> <span class="hljs-string">&quot;John&quot;</span>,
  <span class="hljs-symbol">nationality:</span> <span class="hljs-string">&quot;German&quot;</span>,
  <span class="hljs-symbol">photo_url:</span> <span class="hljs-string">&quot;http://image.com/john.jpg&quot;</span>
})
</code></pre>
<p>That by itself doesn&apos;t do us any good. But what if we could have our HTML form package up all the artist data into one <code>params</code> field? Then, we could just use something like:</p>
<pre><code class="lang-rb">  <span class="hljs-variable">@artist</span> = <span class="hljs-constant">Artist</span>.create!(params[<span class="hljs-symbol">:artist</span>])
</code></pre>
<p>Change the HTML of your form <code>app/views/artists/new.html.erb</code> to this:</p>
<pre><code class="lang-html"><span class="hljs-tag">&lt;<span class="hljs-title">form</span> <span class="hljs-attribute">action</span>=<span class="hljs-value">&quot;/artists&quot;</span> <span class="hljs-attribute">method</span>=<span class="hljs-value">&quot;post&quot;</span> &gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-title">input</span> <span class="hljs-attribute">type</span>=<span class="hljs-value">&quot;hidden&quot;</span> <span class="hljs-attribute">name</span>=<span class="hljs-value">&quot;authenticity_token&quot;</span> <span class="hljs-attribute">value</span>=<span class="hljs-value">&quot;&lt;%= form_authenticity_token %&gt;&quot;</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-title">label</span> <span class="hljs-attribute">for</span>=<span class="hljs-value">&quot;name&quot;</span>&gt;</span>Name:<span class="hljs-tag">&lt;/<span class="hljs-title">label</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-title">input</span> <span class="hljs-attribute">name</span>=<span class="hljs-value">&quot;artist[name]&quot;</span>&gt;</span>

  <span class="hljs-tag">&lt;<span class="hljs-title">label</span> <span class="hljs-attribute">for</span>=<span class="hljs-value">&quot;photo_url&quot;</span>&gt;</span>Photo URL:<span class="hljs-tag">&lt;/<span class="hljs-title">label</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-title">input</span> <span class="hljs-attribute">name</span>=<span class="hljs-value">&quot;artist[photo_url]&quot;</span>&gt;</span>

  <span class="hljs-tag">&lt;<span class="hljs-title">label</span> <span class="hljs-attribute">for</span>=<span class="hljs-value">&quot;nationality&quot;</span>&gt;</span>Nationality:<span class="hljs-tag">&lt;/<span class="hljs-title">label</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-title">input</span> <span class="hljs-attribute">name</span>=<span class="hljs-value">&quot;artist[nationality]&quot;</span>&gt;</span>

  <span class="hljs-tag">&lt;<span class="hljs-title">input</span> <span class="hljs-attribute">type</span>=<span class="hljs-value">&quot;submit&quot;</span> <span class="hljs-attribute">value</span>=<span class="hljs-value">&quot;Create&quot;</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-title">form</span>&gt;</span>
</code></pre>
<p>It important to notice the input&apos;s name space following <code>artist[attribute]</code> patterns. This is important for how we can access the arguments passed by the user in the global <code>params</code> object.</p>
<p><a href="http://stackoverflow.com/questions/6885990/rails-params-explained" target="_blank">More about Rails&apos; Params</a></p>
<p>If you submit the form now, and check the console, you should see something like:</p>
<pre><code>{
    &quot;authenticity_token&quot;=&gt;&quot;I04y1td+X5CIiVdZ50ABEGAy6f0LCJReSDa5eq5/GvXICDkUpeu2peCt/BlPHmU1VSadWvzXUy/9uyNixjrP+A==&quot;,
    &quot;artist&quot;=&gt;{
        &quot;name&quot;=&gt;&quot;John&quot;,
        &quot;photo_url&quot;=&gt;&quot;http://images.google.com/john.jpg&quot;,
        &quot;nationality&quot;=&gt;&quot;German&quot;
    }
}
</code></pre><p>That&apos;s all the data that was submitted with the form. Notice all of the artist&apos;s data is now inside its own hash <strong>inside</strong> the params hash.</p>
<p>Update the controller to receive that param:</p>
<pre><code class="lang-rb"><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">create</span></span>
  <span class="hljs-variable">@artist</span> = <span class="hljs-constant">Artist</span>.create!(params[<span class="hljs-symbol">:artist</span>])
<span class="hljs-keyword">end</span>
</code></pre>
<p>However, in the browser, you get:</p>
<pre><code># ERROR!!!
# ActiveModel::ForbiddenAttributesError in ArtistsController#create
</code></pre><p>Wat?! Why can&apos;t we create an <code>artist</code> using the hash available in params? This is a security feature of Rails: <code>params</code> could include extra fields that have been maliciously added to the form. This extra data could be harmful, therefore Rails requires us to whitelist fields that are allowed through form submissions.</p>
<h3 id="strong-params">Strong Params</h3>
<p>Whitelisting is done using <strong>strong parameters</strong> configuration!</p>
<p>This is a security feature of Rails: params could include extra fields that have been maliciously added to the form. This extra data could be harmful, therefore Rails requires us to whitelist fields that are allowed through form submissions.</p>
<p>Now we should update our Artists controller a bit.</p>
<p>First let&apos;s create a private method that will allow us to pull information from the form.</p>
<p>in <code>app/controllers/artists_controller.rb</code>:</p>
<pre><code class="lang-ruby">private
<span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">artist_params</span></span>
  params.<span class="hljs-keyword">require</span>(<span class="hljs-symbol">:artist</span>).permit(<span class="hljs-symbol">:name</span>, <span class="hljs-symbol">:photo_url</span>, <span class="hljs-symbol">:nationality</span>)
<span class="hljs-keyword">end</span>
</code></pre>
<blockquote>
<p>The <code>require</code> method ensures that a specific parameter is present. Throws an error otherwise. The <code>permit</code> method returns a copy of the parameters object, returning only the permitted keys and values.</p>
<p><strong>Note</strong> that we encapsulate the <code>artist_params</code> in a private method because we only want this available to this particular class and it shouldn&apos;t work outside the scope of the controller</p>
</blockquote>
<p>The only thing we have left to do is update our controller actions that use params to create or update an artist.</p>
<p>in <code>app/controllers/artists_controller.rb</code>:</p>
<pre><code class="lang-ruby"><span class="hljs-comment">#### before</span>
<span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">create</span></span>
  <span class="hljs-variable">@artist</span> = <span class="hljs-constant">Artist</span>.create!(params[<span class="hljs-symbol">:artist</span>])
  redirect_to <span class="hljs-string">&quot;/artists/<span class="hljs-subst">#{<span class="hljs-variable">@artist</span>.id}</span>&quot;</span>
<span class="hljs-keyword">end</span>

<span class="hljs-comment">#### after  </span>
<span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">create</span></span>
  <span class="hljs-variable">@artist</span> = <span class="hljs-constant">Artist</span>.create!(artist_params)
  redirect_to <span class="hljs-string">&quot;/artists/<span class="hljs-subst">#{<span class="hljs-variable">@artist</span>.id}</span>&quot;</span>
<span class="hljs-keyword">end</span>
</code></pre>
<p>Great, now we&apos;re protected!</p>
<h2 id="break-10125">Break (10/125)</h2>
<h2 id="youdo-20145">You-Do: (20/145)</h2>
<ul>
<li>Define <code>edit</code>, <code>update</code> and <code>destroy</code> controller actions.</li>
<li>Create an <code>edit</code> view file.</li>
<li>When you visit the <code>edit</code> page, the relevant form should be displayed</li>
<li>Upon submitting the form, artist info updates accordingly.</li>
<li>Create a way to destroy an artist</li>
</ul>
<h2 id="bonus-songs">Bonus: Songs</h2>
<ul>
<li>Define 7 RESTful routes and map to appropriate songs controller actions.</li>
<li>Create a songs controller</li>
<li>Define 7 CRUD actions</li>
<li>Create appropriate view files</li>
</ul>
<h2 id="closing-5150">Closing (5/150)</h2>
<p>Who can remind us of the importance of a controller?
How does the view access data?
What is the difference between render and redirect?
How does strong params protect us from malicious input?</p>
<h2 id="resources">Resources</h2>
<ul>
<li><a href="http://guides.rubyonrails.org/action_controller_overview.html" target="_blank">Rails Guides: Controllers</a></li>
<li><a href="http://guides.rubyonrails.org/layouts_and_rendering.html" target="_blank">Rails Guides: Views and Templates</a></li>
<li><a href="https://www.railstutorial.org/book" target="_blank">Michael Hartl&apos;s Rails Tutorial</a></li>
</ul>

                    
                    </section>
                
                
                </div>
            </div>
        </div>

        
        <a href="../../05-mvc-with-rails/rails-models-and-migrations/readme.html" class="navigation navigation-prev " aria-label="Previous page: Models and Migrations"><i class="fa fa-angle-left"></i></a>
        
        
        <a href="../../05-mvc-with-rails/rails-routes-and-resources/readme.html" class="navigation navigation-next " aria-label="Next page: Routes and Resources"><i class="fa fa-angle-right"></i></a>
        
    </div>
</div>

        
<script src="../../gitbook/app.js"></script>

    
    <script src="../../gitbook/plugins/gitbook-plugin-search/lunr.min.js"></script>
    

    
    <script src="../../gitbook/plugins/gitbook-plugin-search/search.js"></script>
    

    
    <script src="../../gitbook/plugins/gitbook-plugin-sharing/buttons.js"></script>
    

    
    <script src="../../gitbook/plugins/gitbook-plugin-fontsettings/buttons.js"></script>
    

<script>
require(["gitbook"], function(gitbook) {
    var config = {"highlight":{},"search":{"maxIndexSize":1000000},"sharing":{"facebook":true,"twitter":true,"google":false,"weibo":false,"instapaper":false,"vk":false,"all":["facebook","google","twitter","weibo","instapaper"]},"fontsettings":{"theme":"white","family":"sans","size":2}};
    gitbook.start(config);
});
</script>

        
    </body>
    
</html>
