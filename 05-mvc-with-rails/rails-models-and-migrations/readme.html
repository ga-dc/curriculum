<!DOCTYPE HTML>
<html lang="en" >
    
    <head>
        
        <meta charset="UTF-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <title>Models and Migrations | Welcome to GA&#39;s WDI-DC</title>
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="">
        <meta name="generator" content="GitBook 2.6.6">
        
        
        <meta name="HandheldFriendly" content="true"/>
        <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
        <meta name="apple-mobile-web-app-capable" content="yes">
        <meta name="apple-mobile-web-app-status-bar-style" content="black">
        <link rel="apple-touch-icon-precomposed" sizes="152x152" href="../../gitbook/images/apple-touch-icon-precomposed-152.png">
        <link rel="shortcut icon" href="../../gitbook/images/favicon.ico" type="image/x-icon">
        
    <link rel="stylesheet" href="../../gitbook/style.css">
    
        
        <link rel="stylesheet" href="../../gitbook/plugins/gitbook-plugin-highlight/website.css">
        
    
        
        <link rel="stylesheet" href="../../gitbook/plugins/gitbook-plugin-search/search.css">
        
    
        
        <link rel="stylesheet" href="../../gitbook/plugins/gitbook-plugin-fontsettings/website.css">
        
    
    

        
    
    
    <link rel="next" href="../../05-mvc-with-rails/rails-views-and-controllers/readme.html" />
    
    
    <link rel="prev" href="../../05-mvc-with-rails/MVC-intro-to-rails/readme.html" />
    

        
    </head>
    <body>
        
        
    <div class="book"
        data-level="4.3"
        data-chapter-title="Models and Migrations"
        data-filepath="05-mvc-with-rails/rails-models-and-migrations/readme.md"
        data-basepath="../.."
        data-revision="Wed Jan 06 2016 18:33:10 GMT+0000 (UTC)"
        data-innerlanguage="">
    

<div class="book-summary">
    <nav role="navigation">
        <ul class="summary">
            
            
            
            

            

            
    
        <li class="chapter " data-level="0" data-path="index.html">
            
                
                    <a href="../../index.html">
                
                        <i class="fa fa-check"></i>
                        
                        An Introduction
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="1" data-path="01-front-end-fundamentals/readme.html">
            
                
                    <a href="../../01-front-end-fundamentals/readme.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>1.</b>
                        
                        Front End Fundamentals
                    </a>
            
            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.1" data-path="01-front-end-fundamentals/command-line/readme.html">
            
                
                    <a href="../../01-front-end-fundamentals/command-line/readme.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>1.1.</b>
                        
                        Command Line Interface
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="1.2" data-path="01-front-end-fundamentals/git/readme.html">
            
                
                    <a href="../../01-front-end-fundamentals/git/readme.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>1.2.</b>
                        
                        Git
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="1.3" data-path="01-front-end-fundamentals/intro-to-web-and-html/readme.html">
            
                
                    <a href="../../01-front-end-fundamentals/intro-to-web-and-html/readme.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>1.3.</b>
                        
                        Intro to Web and HTML
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="1.4" data-path="01-front-end-fundamentals/css/readme.html">
            
                
                    <a href="../../01-front-end-fundamentals/css/readme.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>1.4.</b>
                        
                        CSS
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="1.5" data-path="01-front-end-fundamentals/javascript-data-types/readme.html">
            
            <span><b>1.5.</b> JavaScript Data Types</span>
            
            
        </li>
    
        <li class="chapter " data-level="1.6" data-path="01-front-end-fundamentals/javascript-loops-conditionals/readme.html">
            
            <span><b>1.6.</b> JavaScript Loops and Conditionals</span>
            
            
        </li>
    
        <li class="chapter " data-level="1.7" data-path="01-front-end-fundamentals/javascript-objects-functions/readme.html">
            
                
                    <a href="../../01-front-end-fundamentals/javascript-objects-functions/readme.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>1.7.</b>
                        
                        JavaScript Objects and Functions
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="1.8" data-path="01-front-end-fundamentals/javascript-DOM/readme.html">
            
                
                    <a href="../../01-front-end-fundamentals/javascript-DOM/readme.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>1.8.</b>
                        
                        JavaScript DOM
                    </a>
            
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="2" data-path="02-intermediate-front-end/readme.html">
            
                
                    <a href="../../02-intermediate-front-end/readme.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>2.</b>
                        
                        Intermediate Front End
                    </a>
            
            
            <ul class="articles">
                
    
        <li class="chapter " data-level="2.1" data-path="02-intermediate-front-end/scope-context-closures/readme.html">
            
                
                    <a href="../../02-intermediate-front-end/scope-context-closures/readme.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>2.1.</b>
                        
                        Scope, Context, and Closures
                    </a>
            
            
            <ul class="articles">
                
    
        <li class="chapter " data-level="2.1.1" data-path="02-intermediate-front-end/scope-context-closures/scope.html">
            
                
                    <a href="../../02-intermediate-front-end/scope-context-closures/scope.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>2.1.1.</b>
                        
                        Scope
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="2.1.2" data-path="02-intermediate-front-end/scope-context-closures/context.html">
            
                
                    <a href="../../02-intermediate-front-end/scope-context-closures/context.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>2.1.2.</b>
                        
                        Context
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="2.1.3" data-path="02-intermediate-front-end/scope-context-closures/closures.html">
            
                
                    <a href="../../02-intermediate-front-end/scope-context-closures/closures.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>2.1.3.</b>
                        
                        Closures
                    </a>
            
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="2.2" data-path="02-intermediate-front-end/events-and-callbacks/readme.html">
            
                
                    <a href="../../02-intermediate-front-end/events-and-callbacks/readme.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>2.2.</b>
                        
                        Events and Callbacks
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="2.3" data-path="02-intermediate-front-end/git_branching/readme.html">
            
                
                    <a href="../../02-intermediate-front-end/git_branching/readme.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>2.3.</b>
                        
                        Git Branching
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="2.4" data-path="02-intermediate-front-end/jquery/jquery-intro-selectors.html">
            
                
                    <a href="../../02-intermediate-front-end/jquery/jquery-intro-selectors.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>2.4.</b>
                        
                        jQuery
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="2.5" data-path="02-intermediate-front-end/jquery/jquery-two.html">
            
                
                    <a href="../../02-intermediate-front-end/jquery/jquery-two.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>2.5.</b>
                        
                        jQuery 2
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="2.6" data-path="02-intermediate-front-end/workflows/lesson_plan.html">
            
            <span><b>2.6.</b> Workflows</span>
            
            
        </li>
    
        <li class="chapter " data-level="2.7" data-path="02-intermediate-front-end/css2/readme.html">
            
                
                    <a href="../../02-intermediate-front-end/css2/readme.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>2.7.</b>
                        
                        CSS 2 (Layout &amp; Fonts)
                    </a>
            
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="3" data-path="04-ruby-mvc-sinatra/readme.html">
            
                
                    <a href="../../04-ruby-mvc-sinatra/readme.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>3.</b>
                        
                        Ruby + MVC with Sinatra
                    </a>
            
            
            <ul class="articles">
                
    
        <li class="chapter " data-level="3.1" data-path="04-ruby-mvc-sinatra/ruby-basics/readme.html">
            
                
                    <a href="../../04-ruby-mvc-sinatra/ruby-basics/readme.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>3.1.</b>
                        
                        Ruby Basics
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="3.2" data-path="04-ruby-mvc-sinatra/ruby-enumerables/readme.html">
            
                
                    <a href="../../04-ruby-mvc-sinatra/ruby-enumerables/readme.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>3.2.</b>
                        
                        Ruby Enumerables
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="3.3" data-path="04-ruby-mvc-sinatra/problem_modeling/readme.html">
            
            <span><b>3.3.</b> Problem Modeling</span>
            
            
        </li>
    
        <li class="chapter " data-level="3.4" data-path="04-ruby-mvc-sinatra/domain_modeling/readme.html">
            
                
                    <a href="../../04-ruby-mvc-sinatra/domain_modeling/readme.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>3.4.</b>
                        
                        Domain Modeling
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="3.5" data-path="04-ruby-mvc-sinatra/databases/readme.html">
            
                
                    <a href="../../04-ruby-mvc-sinatra/databases/readme.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>3.5.</b>
                        
                        Databases
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="3.6" data-path="04-ruby-mvc-sinatra/active-record-intro/readme.html">
            
                
                    <a href="../../04-ruby-mvc-sinatra/active-record-intro/readme.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>3.6.</b>
                        
                        Active Record
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="3.7" data-path="04-ruby-mvc-sinatra/sinatra-rest/readme.html">
            
                
                    <a href="../../04-ruby-mvc-sinatra/sinatra-rest/readme.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>3.7.</b>
                        
                        Sinatra &amp; REST
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="3.8" data-path="04-ruby-mvc-sinatra/sinatra-and-activerecord/readme.html">
            
                
                    <a href="../../04-ruby-mvc-sinatra/sinatra-and-activerecord/readme.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>3.8.</b>
                        
                        Sinatra &amp; Active Record
                    </a>
            
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="4" data-path="05-mvc-with-rails/readme.html">
            
                
                    <a href="../../05-mvc-with-rails/readme.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>4.</b>
                        
                        MVC with Rails
                    </a>
            
            
            <ul class="articles">
                
    
        <li class="chapter " data-level="4.1" data-path="05-mvc-with-rails/rspec/readme.html">
            
                
                    <a href="../../05-mvc-with-rails/rspec/readme.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>4.1.</b>
                        
                        Unit Testing with RSpec
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="4.2" data-path="05-mvc-with-rails/MVC-intro-to-rails/readme.html">
            
                
                    <a href="../../05-mvc-with-rails/MVC-intro-to-rails/readme.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>4.2.</b>
                        
                        MVC Intro to Rails
                    </a>
            
            
        </li>
    
        <li class="chapter active" data-level="4.3" data-path="05-mvc-with-rails/rails-models-and-migrations/readme.html">
            
                
                    <a href="../../05-mvc-with-rails/rails-models-and-migrations/readme.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>4.3.</b>
                        
                        Models and Migrations
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="4.4" data-path="05-mvc-with-rails/rails-views-and-controllers/readme.html">
            
                
                    <a href="../../05-mvc-with-rails/rails-views-and-controllers/readme.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>4.4.</b>
                        
                        Views and Controllers
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="4.5" data-path="05-mvc-with-rails/rails-routes-and-resources/readme.html">
            
                
                    <a href="../../05-mvc-with-rails/rails-routes-and-resources/readme.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>4.5.</b>
                        
                        Routes and Resources
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="4.6" data-path="05-mvc-with-rails/rails-helpers/readme.html">
            
                
                    <a href="../../05-mvc-with-rails/rails-helpers/readme.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>4.6.</b>
                        
                        Helpers
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="4.7" data-path="05-mvc-with-rails/rails-error-handling/readme.html">
            
                
                    <a href="../../05-mvc-with-rails/rails-error-handling/readme.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>4.7.</b>
                        
                        Error Handling and Validations
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="4.8" data-path="05-mvc-with-rails/rails-sessions-and-auth/readme.html">
            
                
                    <a href="../../05-mvc-with-rails/rails-sessions-and-auth/readme.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>4.8.</b>
                        
                        Sessions and Auth
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="4.9" data-path="05-mvc-with-rails/rails-deployment/readme.html">
            
                
                    <a href="../../05-mvc-with-rails/rails-deployment/readme.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>4.9.</b>
                        
                        Deployment
                    </a>
            
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="5" data-path="07-apis-express-ajax/readme.html">
            
                
                    <a href="../../07-apis-express-ajax/readme.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>5.</b>
                        
                        APIs/Express/AJAX
                    </a>
            
            
            <ul class="articles">
                
    
        <li class="chapter " data-level="5.1" data-path="07-apis-express-ajax/apis/readme.html">
            
                
                    <a href="../../07-apis-express-ajax/apis/readme.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>5.1.</b>
                        
                        Building APIs in Rails
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="5.2" data-path="07-apis-express-ajax/ajax/readme.html">
            
                
                    <a href="../../07-apis-express-ajax/ajax/readme.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>5.2.</b>
                        
                        AJAX
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="5.3" data-path="07-apis-express-ajax/prototypes_and_constructors/readme.html">
            
                
                    <a href="../../07-apis-express-ajax/prototypes_and_constructors/readme.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>5.3.</b>
                        
                        Prototypes and Constructors
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="5.4" data-path="07-apis-express-ajax/express_intro/readme.html">
            
                
                    <a href="../../07-apis-express-ajax/express_intro/readme.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>5.4.</b>
                        
                        Intro to Express
                    </a>
            
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="6" data-path="08-single-page-web-apps/readme.html">
            
                
                    <a href="../../08-single-page-web-apps/readme.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>6.</b>
                        
                        Single Page Web Apps
                    </a>
            
            
            <ul class="articles">
                
    
        <li class="chapter " data-level="6.1" data-path="08-single-page-web-apps/express_2/readme.html">
            
                
                    <a href="../../08-single-page-web-apps/express_2/readme.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>6.1.</b>
                        
                        Express Routing / APIs
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="6.2" data-path="08-single-page-web-apps/mongo_mongoose/readme.html">
            
                
                    <a href="../../08-single-page-web-apps/mongo_mongoose/readme.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>6.2.</b>
                        
                        Mongo and Mongoose
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="6.3" data-path="08-single-page-web-apps/node-express-user-authentication/readme.html">
            
                
                    <a href="../../08-single-page-web-apps/node-express-user-authentication/readme.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>6.3.</b>
                        
                        Local Authentication using Passport
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="6.4" data-path="08-single-page-web-apps/oauth-via-3rd-party-apps/readme.html">
            
            <span><b>6.4.</b> OAuth using Passport</span>
            
            
        </li>
    
        <li class="chapter " data-level="6.5" data-path="08-single-page-web-apps/oojs1_read/readme.html">
            
            <span><b>6.5.</b> Object-Oriented FE JS: R / CRUD</span>
            
            
        </li>
    
        <li class="chapter " data-level="6.6" data-path="08-single-page-web-apps/oojs2_create_update_destroy/readme.html">
            
            <span><b>6.6.</b> Object-Oriented FE JS: CUD / CRUD</span>
            
            
        </li>
    
        <li class="chapter " data-level="6.7" data-path="08-single-page-web-apps/git-teams/readme.html">
            
                
                    <a href="../../08-single-page-web-apps/git-teams/readme.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>6.7.</b>
                        
                        Git Team Workflows
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="6.8" data-path="08-single-page-web-apps/responsive-web-design/readme.html">
            
                
                    <a href="../../08-single-page-web-apps/responsive-web-design/readme.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>6.8.</b>
                        
                        Responsive Web Design
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="6.9" data-path="08-single-page-web-apps/tdd/readme.html">
            
                
                    <a href="../../08-single-page-web-apps/tdd/readme.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>6.9.</b>
                        
                        TDD JS using Jasmine
                    </a>
            
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="7" data-path="10-angular/readme.html">
            
                
                    <a href="../../10-angular/readme.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>7.</b>
                        
                        MVW with Angular
                    </a>
            
            
            <ul class="articles">
                
    
        <li class="chapter " data-level="7.1" data-path="10-angular/angular_intro_controllers_directives/readme.html">
            
            <span><b>7.1.</b> Angular Intro: Controllers &amp; Directives</span>
            
            
        </li>
    
        <li class="chapter " data-level="7.2" data-path="10-angular/services_templates_and_routing/readme.html">
            
            <span><b>7.2.</b> Services, Templates, and Routing</span>
            
            
        </li>
    
        <li class="chapter " data-level="7.3" data-path="10-angular/custom_directives/readme.html">
            
            <span><b>7.3.</b> Custom Directives</span>
            
            
        </li>
    
        <li class="chapter " data-level="7.4" data-path="10-angular/firebase_in_angular/readme.html">
            
            <span><b>7.4.</b> AngularFire: Firebase &amp; Angular</span>
            
            
        </li>
    
        <li class="chapter " data-level="7.5" data-path="10-angular/angular-vs-rails.html">
            
                
                    <a href="../../10-angular/angular-vs-rails.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>7.5.</b>
                        
                        Angular vs. Rails
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="7.6" data-path="11-multi-track/readme.html">
            
                
                    <a href="../../11-multi-track/readme.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>7.6.</b>
                        
                        Back and Front of Front End
                    </a>
            
            
            <ul class="articles">
                
    
        <li class="chapter " data-level="7.6.1" >
            
            <span><b>7.6.1.</b> BackBone</span>
            
            
            <ul class="articles">
                
    
        <li class="chapter " data-level="7.6.1.1" data-path="11-multi-track/bb_models_collections/readme.html">
            
                
                    <a href="../../11-multi-track/bb_models_collections/readme.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>7.6.1.1.</b>
                        
                        Models and Collections
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="7.6.1.2" data-path="11-multi-track/bb_views_part1/readme.html">
            
                
                    <a href="../../11-multi-track/bb_views_part1/readme.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>7.6.1.2.</b>
                        
                        Views (part 1)
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="7.6.1.3" data-path="11-multi-track/bb_views_part2/readme.html">
            
                
                    <a href="../../11-multi-track/bb_views_part2/readme.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>7.6.1.3.</b>
                        
                        Views (part 2)
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="7.6.1.4" data-path="11-multi-track/bb_routers/readme.html">
            
                
                    <a href="../../11-multi-track/bb_routers/readme.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>7.6.1.4.</b>
                        
                        Routers
                    </a>
            
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="7.6.2" >
            
            <span><b>7.6.2.</b> Front End</span>
            
            
            <ul class="articles">
                
    
        <li class="chapter " data-level="7.6.2.1" data-path="11-multi-track/bootstrap/readme.html">
            
                
                    <a href="../../11-multi-track/bootstrap/readme.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>7.6.2.1.</b>
                        
                        Bootstrap
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="7.6.2.2" data-path="11-multi-track/flexbox/readme.html">
            
                
                    <a href="../../11-multi-track/flexbox/readme.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>7.6.2.2.</b>
                        
                        Flex Box
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="7.6.2.3" data-path="11-multi-track/foundation/readme.html">
            
                
                    <a href="../../11-multi-track/foundation/readme.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>7.6.2.3.</b>
                        
                        Foundation
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="7.6.2.4" data-path="11-multi-track/intro-to-php/readme.html">
            
                
                    <a href="../../11-multi-track/intro-to-php/readme.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>7.6.2.4.</b>
                        
                        Intro to PHP
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="7.6.2.5" data-path="11-multi-track/jquery-plugins/readme.html">
            
                
                    <a href="../../11-multi-track/jquery-plugins/readme.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>7.6.2.5.</b>
                        
                        jQuery Plugins
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="7.6.2.6" data-path="11-multi-track/mapping/readme.html">
            
                
                    <a href="../../11-multi-track/mapping/readme.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>7.6.2.6.</b>
                        
                        Mapping
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="7.6.2.7" data-path="11-multi-track/pseudo-selectors/readme.html">
            
                
                    <a href="../../11-multi-track/pseudo-selectors/readme.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>7.6.2.7.</b>
                        
                        Pseudo Selectors
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="7.6.2.8" data-path="11-multi-track/sass1-basic-reuse/readme.html">
            
                
                    <a href="../../11-multi-track/sass1-basic-reuse/readme.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>7.6.2.8.</b>
                        
                        Sass 1: Basic Reuse
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="7.6.2.9" data-path="11-multi-track/sass2-control-directives/readme.html">
            
                
                    <a href="../../11-multi-track/sass2-control-directives/readme.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>7.6.2.9.</b>
                        
                        Sass 2: Control Directives
                    </a>
            
            
        </li>
    

            </ul>
            
        </li>
    

            </ul>
            
        </li>
    

            </ul>
            
        </li>
    


            
            <li class="divider"></li>
            <li>
                <a href="https://www.gitbook.com" target="blank" class="gitbook-link">
                    Published with GitBook
                </a>
            </li>
            
        </ul>
    </nav>
</div>

    <div class="book-body">
        <div class="body-inner">
            <div class="book-header" role="navigation">
    <!-- Actions Left -->
    

    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href="../../" >Welcome to GA&#39;s WDI-DC</a>
    </h1>
</div>

            <div class="page-wrapper" tabindex="-1" role="main">
                <div class="page-inner">
                
                
                    <section class="normal" id="section-">
                    
                        <h1 id="rails-models-and-migrations">Rails Models and Migrations</h1>
<h2 id="learning-objectives">Learning Objectives</h2>
<ul>
<li>Create a new rails application with postgres as the default</li>
<li>Use <code>rake</code> to create, edit, and update, and seed the db</li>
<li>Use rails generators to create migrations.</li>
<li>Use rails console to inspect and manipulate models</li>
<li>Use rails migrations to create tables and modify columns</li>
<li>Undo a migration with <code>rake db:rollback</code></li>
<li>Create migrations that associate one model with another.</li>
<li>Identify the impacts of editing existing migrations.</li>
<li>Use <code>timestamps</code> to timestamp crud actions</li>
<li>Use shorthand syntax to create migrations from the command line.</li>
</ul>
<hr>
<p>The files we&#x2019;ll be working with in this lesson are highlighted in blue below:</p>
<p><img src="https://dl.dropboxusercontent.com/s/2zho5ekuhxpp5lx/Screenshot%202015-07-26%2010.26.28.png?dl=0" alt=""></p>
<h2 id="we-do">We do</h2>
<p>Create a new rails application, specifying postgres as the database</p>
<pre><code>$ rails new tunr -d postgresql
</code></pre><p>This creates 92 new files in a directory called tunr. (I counted w/ <code>find . -type f | wc -l</code>)</p>
<p>We can easily keep track of what files have changed if we use version control:</p>
<pre><code>$ cd tunr
$ git init
$ git add .
$ git commit -m &quot;initial commit&quot;
</code></pre><p>The solution for this exercise has already been posted: <a href="https://github.com/ga-dc/tunr-rails-models-and-migrations/tree/solution" target="_blank">https://github.com/ga-dc/tunr-rails-models-and-migrations/tree/solution</a></p>
<h2 id="tunrconfigdatabaseyml">tunr/config/database.yml</h2>
<p>Specifies the database connection options. By default, rails uses the development options.</p>
<p>To create the database, run <code>rake db:create</code></p>
<p>How do you know it worked?</p>
<ul>
<li><code>rails c</code></li>
<li><code>psql -d tunr_development</code></li>
<li><code>rails dbconsole</code></li>
</ul>
<p>Use <code>rails c</code> to view the output of</p>
<pre><code class="lang-rb"><span class="hljs-constant">ENV</span>[<span class="hljs-string">&quot;RAILS_ENV&quot;</span>]
</code></pre>
<blockquote>
<p>You can see that the output is <code>development</code>. ENV[&quot;RAILS_ENV&quot;] is a way we get/set our environment and allows for different types of configurations. The other two types of environment are <code>test</code> and <code>production</code></p>
</blockquote>
<h2 id="what-is-rake">What is Rake?</h2>
<p>Rake is known as &quot;Ruby Make&quot;. Make is a popular tool that allows developers to put
repetitive command line tasks into a single file and run several tasks at the same time
with a single command.</p>
<p>Rails uses rake to:</p>
<ul>
<li>Create the database (<code>rake db:create</code>)</li>
<li>Create / Edit database tables (<code>rake db:migrate</code>)</li>
<li>Drop the database (<code>rake db:drop</code>)</li>
<li>Seed the database (<code>rake db:seed</code>)</li>
</ul>
<p><a href="https://github.com/ruby/rake#description" target="_blank">Learn more about rake here</a></p>
<h2 id="you-do-models">You do: Models</h2>
<p>Create the models for both Artists and Songs</p>
<p>If you&#x2019;re feeling adventurous, consider adding a third model like Favorites, or Genres.</p>
<p>How do you know it worked?</p>
<p>If we hop into the rails console and type in Artist:</p>
<pre><code>$ rails c
Loading development environment (Rails 4.2.4)
2.2.3 :001&gt; Artist
 =&gt; Artist(Table doesn&apos;t exist)
</code></pre><blockquote>
<p>If we type in any other capitalized word it will throw an error <code>uninitialized Constant</code></p>
</blockquote>
<h2 id="we-do-migrations">We do: Migrations</h2>
<blockquote>
<p>You can think of each migration as being a new &apos;version&apos; of the database. A schema starts off with nothing in it, and each migration modifies it to add or remove tables, columns, or entries. Active Record knows how to update your schema along this timeline, bringing it from whatever point it is in the history to the latest version. Active Record will also update your db/schema.rb file to match the up-to-date structure of your database.</p>
</blockquote>
<p><a href="http://edgeguides.rubyonrails.org/active_record_migrations.html" target="_blank">http://edgeguides.rubyonrails.org/active_record_migrations.html</a></p>
<p>In the terminal:</p>
<pre><code>$ rails g migration create_artists
</code></pre><p><code>rails g</code> is short for <code>rails generate</code>.</p>
<p>This creates a migration file <code>db/migrate/20150726145027_create_artists.rb</code></p>
<blockquote>
<p>The numbers at the beginning of a migration file are a timestamp. Rails uses this timestamp to determine which migration should be run and in what order, so if you&apos;re copying a migration from another application or generate a file yourself, be aware of its position in the order. <a href="http://edgeguides.rubyonrails.org/active_record_migrations.html#creating-a-standalone-migration" target="_blank">source</a></p>
</blockquote>
<pre><code class="lang-rb"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">CreateArtists</span> <span class="hljs-inheritance">&lt; <span class="hljs-parent">ActiveRecord::Migration</span></span></span>
  <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">change</span></span>
    create_table <span class="hljs-symbol">:artists</span> <span class="hljs-keyword">do</span> |t|
    <span class="hljs-keyword">end</span>
  <span class="hljs-keyword">end</span>
<span class="hljs-keyword">end</span>
</code></pre>
<p>This file defines the structure of a new table called &quot;artists&quot;.</p>
<pre><code class="lang-rb"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">CreateArtists</span> <span class="hljs-inheritance">&lt; <span class="hljs-parent">ActiveRecord::Migration</span></span></span>
  <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">change</span></span>
    create_table <span class="hljs-symbol">:artists</span> <span class="hljs-keyword">do</span> |t|
      t.string <span class="hljs-symbol">:name</span>
      t.string <span class="hljs-symbol">:photo_url</span>
      t.string <span class="hljs-symbol">:nationality</span>
    <span class="hljs-keyword">end</span>
  <span class="hljs-keyword">end</span>
<span class="hljs-keyword">end</span>
</code></pre>
<p><code>t</code> represents the table we&apos;re creating, and we can use methods like <code>string</code>, <code>integer</code>, and other
data types to create columns of that type, passing in the name of the column as a symbol.</p>
<p>You can create the artists table and run this migration with <code>rake db:migrate</code></p>
<p><a href="http://edgeguides.rubyonrails.org/active_record_migrations.html#using-the-change-method" target="_blank">Using the Change method</a></p>
<p>When you run <code>rake db:migrate</code> I file called <code>db/schema.rb</code> gets generated. What are it&apos;s contents?</p>
<blockquote>
<p>You should NEVER have to update the <code>schema.rb</code>. Running <code>rake db:migrate</code> will update the schema for you as per your migrations.</p>
</blockquote>
<h2 id="you-do-view-dbschemarb">You do: view db/schema.rb</h2>
<p>The above command created this file. Take a minute to read through it.</p>
<h2 id="you-do-use-rails-console">You do: Use Rails console</h2>
<ul>
<li>to create at least two artists.</li>
<li>save the commands you run in your text editor so you can leverage it later.</li>
</ul>
<pre><code>$ rails console
</code></pre><p><code>rails c</code> is short for <code>rails console</code></p>
<h2 id="you-do-create-the-migration-for-songs">You do: Create the migration for Songs</h2>
<p>To associate one model with another you can use either <code>t.belongs_to :artist</code> or <code>t.references :artist</code> or <code>t.integer :artist_id</code></p>
<h2 id="i-do-passing-arguments-into-rails-g-migration">I do: passing arguments into <code>rails g migration</code></h2>
<pre><code>$ rails g migration create_songs title:string album:string preview_url:string artist:references
</code></pre><blockquote>
<p>There are lots of little short cuts that <code>g</code> or <code>generate</code> can give you. <a href="http://edgeguides.rubyonrails.org/active_record_migrations.html#model-generators" target="_blank">Model Generators</a> is just one example.</p>
</blockquote>
<p>The above command creates the following file:</p>
<pre><code class="lang-rb"><span class="hljs-comment"># db/migrate/20150726150324_create_songs.rb</span>
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">CreateSongs</span> <span class="hljs-inheritance">&lt; <span class="hljs-parent">ActiveRecord::Migration</span></span></span>
  <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">change</span></span>
    create_table <span class="hljs-symbol">:songs</span> <span class="hljs-keyword">do</span> |t|
      t.string <span class="hljs-symbol">:title</span>
      t.string <span class="hljs-symbol">:album</span>
      t.string <span class="hljs-symbol">:preview_url</span>
      t.references <span class="hljs-symbol">:artist</span>, <span class="hljs-symbol">index:</span> <span class="hljs-keyword">true</span>, <span class="hljs-symbol">foreign_key:</span> <span class="hljs-keyword">true</span>
    <span class="hljs-keyword">end</span>
  <span class="hljs-keyword">end</span>
<span class="hljs-keyword">end</span>
</code></pre>
<p><code>references</code> is used when the column represents a foreign key for another table. It appears
wherever <code>belongs_to</code> appears in the model definition.</p>
<p><code>t.references :artist</code> is equivilant to <code>t.integer :artist_id</code></p>
<p><a href="http://rny.io/rails/postgresql/2013/08/20/postgresql-indexing-in-rails.html" target="_blank">what is <code>index: true</code>?</a></p>
<h2 id="you-do-use-rails-console">You do: Use rails console</h2>
<ul>
<li>to create at least three songs that are associated with the previous two artists.</li>
<li>save the commands you run in your text editor so you can leverage it later.</li>
</ul>
<h2 id="break">Break</h2>
<h2 id="we-do-seeds">We do: Seeds</h2>
<p>Seeds? Why do we need to create dummy data for our application. In order to test out the interfaces and functionalities we build out, we need some content/data to manipulate in order to see how it looks and feels on our application.</p>
<p>Let&apos;s update our seeds (<code>db/seeds.rb</code>) file now.</p>
<p>Remember those commands we had you write down during the rails console exercises?</p>
<p>Instead of the console, leverage the code from those exercises to create 3 artists that have 3 songs each.</p>
<p>Make sure to include the following two lines of code at the top of your <code>db/seeds.rb</code>:</p>
<pre><code class="lang-rb"><span class="hljs-constant">Artist</span>.destroy_all
<span class="hljs-constant">Song</span>.destroy_all
</code></pre>
<p>To run this seeds file all we need to do is run <code>$ rake db:seed</code> in the terminal.</p>
<p>After running the seeds, go into the <code>rails console</code> and play with the objects you created.</p>
<h2 id="we-do-how-to-deal-with-mistakes">We do: How to deal with mistakes</h2>
<p>I forgot to tell you all about timestamps. Rails can automatically timestamp when objects are created and updated. Let&#x2019;s create a new migration to add timestamp columns to the artists table.</p>
<pre><code>$ rails g migration add_timestamps_to_artists
</code></pre><p>In that migration place the following content:</p>
<pre><code class="lang-rb"><span class="hljs-comment"># 20150726150946_add_timestamps_to_artists.rb</span>
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">AddTimestampsToArtists</span> <span class="hljs-inheritance">&lt; <span class="hljs-parent">ActiveRecord::Migration</span></span></span>
  <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">change</span></span>
    add_column <span class="hljs-symbol">:artists</span>, <span class="hljs-symbol">:created_at</span>, <span class="hljs-symbol">:datetime</span>
    add_column <span class="hljs-symbol">:artists</span>, <span class="hljs-symbol">:updated_at</span>, <span class="hljs-symbol">:datetime</span>
  <span class="hljs-keyword">end</span>
<span class="hljs-keyword">end</span>
</code></pre>
<blockquote>
<p>add_column is one of many custom methods that can be used in the <code>change</code> method in migrations. It takes 3 arguments. The first argument is the table you want to add the column to.  The second argument is what column you&apos;d like to add to that table(1st argument). The third argument is the datatype for the column.</p>
</blockquote>
<h2 id="you-do-add-timestamps-to-songs-table">You do: add timestamps to Songs table</h2>
<h2 id="i-do-undoing-things-possibly-dangerous">I do: Undoing things (possibly dangerous)</h2>
<h2 id="the-wrong-waybut-sometimes-the-way-i-do-it">The Wrong Way(but sometimes the way I do it...)</h2>
<blockquote>
<p>I do it often, but only in development and if I haven&apos;t yet shared code with other developers.</p>
</blockquote>
<p>Lets assume you have this migration:</p>
<pre><code class="lang-ruby"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">CreateArtists</span> <span class="hljs-inheritance">&lt; <span class="hljs-parent">ActiveRecord::Migration</span></span></span>
  <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">change</span></span>
    create_table <span class="hljs-symbol">:artists</span> <span class="hljs-keyword">do</span> |t|
      t.string <span class="hljs-symbol">:name</span>
      t.string <span class="hljs-symbol">:poto_url</span>
      t.string <span class="hljs-symbol">:nationality</span>
    <span class="hljs-keyword">end</span>
  <span class="hljs-keyword">end</span>
<span class="hljs-keyword">end</span>
</code></pre>
<p>Oh man! I really messed my migration up by misspelling photo but I&apos;ve already run my migrations. If I fix it directly here in this migration file and run <code>rake db:migrate</code>, I can look at my <code>db/schema.rb</code> file and see that nothings changed, it still says <code>poto_url</code>. It didn&apos;t take.</p>
<p>We can reset the entire database in the terminal:</p>
<pre><code class="lang-bash">$ rake db:drop
$ rake db:create
$ rake db:migrate
</code></pre>
<p>If we run these commands, we&apos;re dropping our entire database and creating a brand new one. Why is this potentially super dangerous?</p>
<p>Another (wrong) way we can do this is by using <code>rake db:rollback</code>.</p>
<p>To undo a single migration, <code>rake db:rollback</code>. This might destroy data - be careful! Whatever columns or tables that were created by that migration will now be gone.</p>
<blockquote>
<p>Something to note. When we run <code>rake db:migrate</code> on a new application it will run every migration. When we run <code>rake db:rollback</code> it will only undo the migration with the most recent timestamp. Every subsequent rollback will undo the most recent timestamped migration that hasn&apos;t been undone yet.</p>
</blockquote>
<p>It is considered OK to rollback migrations, edit them, and re-migrate in a development environment, but NOT in a production environment. If you are working on an application with other developers, avoid using <code>rake db:rollback</code> after code has been pushed, and create new migrations that can be migrated forward on other machines.</p>
<p>Important Note if you&apos;re a developer - Users will be very upset if you destroy their data.</p>
<blockquote>
<p>It&apos;s sometimes not obvious what actions you take may or may not destroy user data. But bother <code>rake db:rollback</code> and <code>rake db:drop</code> have the potential of doing it.</p>
</blockquote>
<h2 id="you-do-create-a-migration-and-roll-it-back">You do: Create a migration and roll it back</h2>
<ul>
<li>Create a migration that adds a column to artist called <code>genre</code> that has a string as the data type</li>
<li>Run the migrations by running <code>$ rake db:migrate</code></li>
<li>Inspect <code>db/schema.rb</code>. Look at its contents.</li>
<li>Now run rake db:rollback</li>
<li>Inspect <code>db/schema.rb</code> again and note that <code>genre</code> is not longer a column in the table.</li>
<li>Spend two minutes experimenting for yourself how <code>$ rake db:rollback</code> works</li>
</ul>
<h2 id="i-do-the-right-way">I do: The Right Way</h2>
<p>Let&apos;s assume we did mess up our initial migration like the code above with the misspelled <code>poto_url</code>. Instead of the methods listed above, the right way is to create an additional migration that changes the name of the column in our table.</p>
<p>In the terminal:</p>
<pre><code class="lang-bash">$ rails g migration change_column_<span class="hljs-keyword">in</span>_artists
</code></pre>
<p>This will generate a new migration. Lets fill its contents now in <code>db/migrate/20151105201357_change_column_in_artists.rb</code>:</p>
<pre><code class="lang-ruby"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">ChangeColumnInArtists</span> <span class="hljs-inheritance">&lt; <span class="hljs-parent">ActiveRecord::Migration</span></span></span>
  <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">change</span></span>
    rename_column <span class="hljs-symbol">:artists</span>, <span class="hljs-symbol">:poto_url</span>, <span class="hljs-symbol">:photo_url</span>
  <span class="hljs-keyword">end</span>
<span class="hljs-keyword">end</span>
</code></pre>
<blockquote>
<p>rename_column is another method we can use inside the <code>change</code> method of migrations. It takes 3 arguments as well. First argument is the table you&apos;d like to rename a column on. The second argument is which column you&apos;d like to change. The third argument is what you&apos;d like to change the column name to.</p>
</blockquote>
<p>Now if we run our migrations, we can see that the artists table in <code>db/schema.rb</code> has the proper <code>:photo_url</code> column. Although it&apos;s a bit more leg work, we&apos;re not having to destroy any databases or undo any migrations which can potentially be really dangerous.</p>
<h2 id="resources">Resources</h2>
<ul>
<li>list of rails commands - <a href="https://gist.github.com/jshawl/ce1de309ef993ec808d9" target="_blank">https://gist.github.com/jshawl/ce1de309ef993ec808d9</a></li>
</ul>
<h2 id="sample-quiz-questions">Sample quiz questions</h2>
<ul>
<li>Why are migrations timestamped, and how does this affect our development workflow?</li>
<li>What is the difference between creating a migration to add a column, vs editing an existing migration and <code>rake db:migrate:reset</code>ting?</li>
</ul>

                    
                    </section>
                
                
                </div>
            </div>
        </div>

        
        <a href="../../05-mvc-with-rails/MVC-intro-to-rails/readme.html" class="navigation navigation-prev " aria-label="Previous page: MVC Intro to Rails"><i class="fa fa-angle-left"></i></a>
        
        
        <a href="../../05-mvc-with-rails/rails-views-and-controllers/readme.html" class="navigation navigation-next " aria-label="Next page: Views and Controllers"><i class="fa fa-angle-right"></i></a>
        
    </div>
</div>

        
<script src="../../gitbook/app.js"></script>

    
    <script src="../../gitbook/plugins/gitbook-plugin-search/lunr.min.js"></script>
    

    
    <script src="../../gitbook/plugins/gitbook-plugin-search/search.js"></script>
    

    
    <script src="../../gitbook/plugins/gitbook-plugin-sharing/buttons.js"></script>
    

    
    <script src="../../gitbook/plugins/gitbook-plugin-fontsettings/buttons.js"></script>
    

<script>
require(["gitbook"], function(gitbook) {
    var config = {"highlight":{},"search":{"maxIndexSize":1000000},"sharing":{"facebook":true,"twitter":true,"google":false,"weibo":false,"instapaper":false,"vk":false,"all":["facebook","google","twitter","weibo","instapaper"]},"fontsettings":{"theme":"white","family":"sans","size":2}};
    gitbook.start(config);
});
</script>

        
    </body>
    
</html>
